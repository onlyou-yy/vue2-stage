{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/globalAPI.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/index.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["/**合并选项 */\r\nexport function mergeOptions(parent,child){\r\n  const options = {};//定义一个新对象用来存储合并后的对象\r\n  //先合并父选项\r\n  for(let key in parent){\r\n    mergeField(key);\r\n  }\r\n  //再用子选项来覆盖和合并父选项\r\n  for(let key in child){\r\n    if(!parent.hasOwnProperty(key)){\r\n      mergeField(key);\r\n    }\r\n  }\r\n  function mergeField(key){\r\n    //采用策略模式减少 if/else\r\n    //如果不在策略中优先使用子\r\n    if(strats[key]){\r\n      options[key] = strats[key](parent[key],child[key]);\r\n    }else{\r\n      //优先使用子的，再使用父的\r\n      options[key] = child[key] || parent[key];\r\n    }\r\n  }\r\n  return options;\r\n}\r\n\r\n//策略模式\r\nconst strats = {};\r\nconst LIFECYCLE = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n];\r\nLIFECYCLE.forEach(hook => {\r\n  strats[hook] = function(p,c){\r\n    // 第一次合并：{} + {created:fn} => {created:[fn]}\r\n    // 第二次合并：{created:fn1} + {created:fn2} => {created:[fn1,fn2]}\r\n    if(c){\r\n      if(p){\r\n        // 父子都有\r\n        return p.concat(c);\r\n      }else{\r\n        // 只有子有,初始化过程\r\n        return [c];\r\n      }\r\n    }else{\r\n      // 如果子没有，就直接使用父的\r\n      // 只要经过初始化过程， 父 就已经是个数组\r\n      // 如 {created:[fn]} + {a:1}\r\n      return p;\r\n    }\r\n  }\r\n})","import { mergeOptions } from \"./utils\";\r\n\r\nexport function initGlobalAPI(Vue){\r\n  //Vue静态属性和方法\r\n  Vue.options = {};\r\n  Vue.mixin = function(mixin){\r\n    //将用户选项和全局的options合并\r\n    this.options = mergeOptions(this.options,mixin);\r\n    return this;\r\n  }\r\n}","/**\r\n * 一般解析html 都不会自己去写，可以使用第三方包，htmlparser2\r\n * 也可以在 https://astexplorer.net/ 感受 ast的转化\r\n */\r\n\r\n//可视化正则表达式 https://regexper.com\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;//匹配标签名\r\n//?:代表不捕获分组,使用match后将不会?:的分组不会出现\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;//匹配标签名和带命名空间的标签,如<namespace:div>\r\n//匹配开始标签\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);//匹配到的分组是一个标签名 <div 匹配到的分组就是开始标签的名字\r\n//匹配结束标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);//匹配的是 </xxx> 最终匹配到的分组就是结束标签的名字\r\n//匹配属性,第一个属性就是 key，value 就是 分组3/4/5\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>']+)))?/;\r\n//匹配闭合标签 > 或者 />\r\nconst startTagClose = /^\\s*(\\/?)>/;// /> <br/>\r\n\r\n\r\n//解析html,vue3并不是使用正则来进行匹配的\r\nexport function parseHTML(html){\r\n  const ELEMENT_TYPE = 1;\r\n  const TEXT_TYPE = 3;\r\n  const stack = [];//用来存放元素的栈\r\n  let currentParent;//指向栈顶元素\r\n  let root;//根节点\r\n  //----------------- 转成 ast -------------------\r\n  //创建ast元素\r\n  function createASTElement(tag,attrs){\r\n    return {\r\n      tag,\r\n      attrs,\r\n      type:ELEMENT_TYPE,\r\n      children:[],\r\n      parent:null\r\n    }\r\n  }\r\n  //获取开始标签回调\r\n  function start(tag,attrs){\r\n    let node = createASTElement(tag,attrs);\r\n    if(!root){//如果还没有根节点，当前ast节点就是根节点\r\n      root = node;\r\n    }\r\n    if(currentParent){\r\n      node.parent = currentParent;\r\n      currentParent.children.push(node);\r\n    }\r\n    stack.push(node);\r\n    currentParent = node;\r\n  }\r\n  //获取标签中内容回调\r\n  function chars(text){\r\n    text = text.replace(/\\s/g,'');\r\n    // 文本直接放到当前节点中\r\n    text && currentParent.children.push({\r\n      type:TEXT_TYPE,\r\n      text,\r\n      parent:currentParent\r\n    })\r\n  }\r\n  //获取结束标签回调\r\n  function end(tag){\r\n    stack.pop();//每次遇到结束标签都进行出栈操作\r\n    currentParent = stack[stack.length - 1];//重新指向栈顶\r\n  }\r\n  //----------------- 转成 ast -------------------\r\n\r\n  //截取内容\r\n  function advance(length){\r\n    html = html.substring(length);\r\n  }\r\n  //匹配解析开始标签\r\n  function parseStartTag(){\r\n    const start = html.match(startTagOpen);\r\n    if(start){\r\n      // 是开始标签\r\n      const match = {\r\n        tagName:start[1],//标签名\r\n        attrs:[],\r\n      }\r\n      //每次匹配成功都将成功的部分删除掉，然后继续匹配，这样就不会重复匹配之前的\r\n      advance(start[0].length);\r\n\r\n      //如果不是开始标签的结束就一直匹配下去\r\n      let attr,end;\r\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n        //删除长度\r\n        advance(attr[0].length);\r\n        //保存属性\r\n        match.attrs.push({name:attr[1],value:attr[3]||attr[4]||attr[5]||true})\r\n      }\r\n      //匹配完成后，如果有 开始标签的结束 就把结束也删除\r\n      if(end){\r\n        advance(end[0].length);\r\n      }\r\n      return match;\r\n    }\r\n    //不是开始标签\r\n    return false;\r\n  }\r\n  //html 最开始肯定是一个 <\r\n  while(html){\r\n    let textEnd = html.indexOf(\"<\");\r\n    //如果textEnd是0 表示 是标签，如<div id=\"app\">{{name}}</div>\r\n    //可能是开始标签，一开始的时候是开始标签 <div id=\"app\">\r\n    //也可能是结束标签，\r\n    //  因为每次匹配到内容都会把响应的内容删除掉，\r\n    //  所以在匹配到开始标签之后textEnd > 0 再匹配到文本，最后就剩下 </div>\r\n    if(textEnd === 0){\r\n      //开始标签的匹配结果\r\n      const startTagMatch = parseStartTag();\r\n      if(startTagMatch){\r\n        //抛出数据，生成ast\r\n        start(startTagMatch.tagName,startTagMatch.attrs);\r\n        continue;\r\n      }\r\n\r\n      //结束标签的匹配结果\r\n      const endTagMatch = html.match(endTag);\r\n      if(endTagMatch){\r\n        //抛出数据，生成ast\r\n        end(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n        continue;\r\n      }\r\n    }\r\n    //如果 textEnd > 0 就是文本的结束位置\r\n    if(textEnd > 0){\r\n      //标签中的内容\r\n      let text = html.substring(0,textEnd);\r\n      if(text){\r\n        //抛出数据，生成ast\r\n        chars(text);\r\n        advance(text.length);\r\n      }\r\n    }\r\n  }\r\n  return root;\r\n}","import { parseHTML } from \"./parse\";\r\n\r\n/**生成属性代码 */\r\nfunction genProps(attrs){\r\n  let str = '';\r\n  for(let i = 0;i < attrs.length;i++){\r\n    let attr = attrs[i];\r\n    if(attr.name == 'style'){\r\n      //如果是 style 就将值转换成对象,color:red;background:red -> {color:'red',background:'red'}\r\n      let obj = {};\r\n      attr.value.split(';').forEach(item=>{\r\n        let [key,value] = item.split(':');\r\n        obj[key] = value;\r\n      })\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0,-1)}}`;//去除最后一个 ,\r\n}\r\n\r\n//匹配表达式变量\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;//{{ xxx }}\r\n/**生成节点代码 */\r\nfunction gen(node){\r\n  if(node.type === 1){\r\n    //标签节点\r\n    return codegen(node);\r\n  }else{\r\n    //文本\r\n    let text = node.text;\r\n    if(defaultTagRE.test(text)){\r\n      //带模版语法的文本 {{name}} hello {{age}} world\r\n      let token = [];\r\n      //捕获匹配到的值\r\n      let match;\r\n      //因为正则表达式中的 g，\r\n      //在匹配的时候会把上一次匹配到的字符串的最后一个字符的索引用lastIndex保存，\r\n      //无论是 .test 还是 .match .exec 都会记录\r\n      //下次就会从lastIndex的位置开始匹配，\r\n      //有三种方式可以重置开始位置，1:重新设置 reg.lastIndex = 0 2:重新赋值表达式 reg = // 3:重新编译表达式 reg.compile()\r\n      defaultTagRE.lastIndex = 0;\r\n      let lastIndex = 0;//上次匹配到的位置\r\n      while(match = defaultTagRE.exec(text)){\r\n        let index = match.index;//当前匹配到的位置\r\n        if(index > lastIndex){\r\n          //如果上次匹配到的位置小于当前位置就把中间的这段内容也放进去\r\n          token.push(JSON.stringify(text.slice(lastIndex,index)));\r\n        }\r\n        token.push(`_s(${match[1].trim()})`);\r\n        lastIndex = index + match[0].length;\r\n      }\r\n      if(lastIndex < text.length){\r\n        token.push(JSON.stringify(text.slice(lastIndex)));\r\n      }\r\n      return `_v(${token.join('+')})`;\r\n    }else{\r\n      //普通纯文本\r\n      return `_v('${text}')`;\r\n    }\r\n  }\r\n}\r\n/**生成children代码 */\r\nfunction genChildren(children){\r\n  return children.map(child => gen(child)).join(',');\r\n}\r\n\r\n/*生成渲染函数代码 */\r\nfunction codegen(ast){\r\n  let children = genChildren(ast.children);\r\n  let code = (\r\n    `_c(\r\n      '${ast.tag}',\r\n      ${ast.attrs.length > 0 ? genProps(ast.attrs): 'null'}\r\n      ${ast.children.length ? `,${children}`:''}\r\n    )`\r\n  );\r\n  return code;\r\n}\r\n\r\n/**编译模版形成渲染函数 */\r\nexport function compileToFunction(template){\r\n  // 1将template 转化成 ast 语法树\r\n  let ast = parseHTML(template);\r\n  // 2生成 render方法（render）,是用with指定执行上下文\r\n  // 模版引擎的原理就是 with + new Function(code)\r\n  let code = `with(this){return ${codegen(ast)};}`;\r\n  // 根据代码生成函数\r\n  let render = new Function(code);\r\n  return render;\r\n}","let id = 0;\r\nclass Dep{\r\n  constructor(){\r\n    this.id = id++;\r\n    // 属性的dep 需要收集 watcher\r\n    // 存放当前属性对应的watcher有哪些\r\n    this.subs = [];\r\n  }\r\n  depend(){\r\n    Dep.target.addDep(this);//让watcher记住dep\r\n  }\r\n  addSub(watcher){\r\n    this.subs.push(watcher);\r\n  }\r\n  /**通知watcher进行更新 */\r\n  notify(){\r\n    this.subs.forEach(watcher => watcher.update());\r\n  }\r\n}\r\n\r\n//添加一个静态属性，用来存放临时的 watcher\r\n//当 watcher 调用 get() 方法进行渲染的时候会去vm上取值，\r\n//取值的时候就会触发数据劫持的 get ，此时就可以将这个watcher进行收集了\r\nDep.target = null;\r\n\r\n/**watcher栈 */\r\nlet stack = [];\r\nexport function pushTarget(watcher){\r\n  stack.push(watcher);\r\n  Dep.target = watcher;\r\n}\r\nexport function popTarget(watcher){\r\n  stack.pop();\r\n  Dep.target = stack[stack.length - 1];\r\n}\r\n\r\nexport default Dep;","/**\r\n * 每一个组件都有一个watcher\r\n * 这样可以做的局部更新\r\n */\r\n\r\nimport Dep, { popTarget, pushTarget } from \"./dep\";\r\n\r\nlet id = 0;\r\n\r\n// dep 和 watcher 就是观察者模式\r\n// 每个属性有一个 dep（属性就是被观察者），watcher就是观察者（属性变化了会通知观察者更新）\r\n\r\n// 需要给每个属性都增加一个dep,目的就是收集watcher\r\n// 一个组件中有多个属性（n个属性会对应一个视图）n个dep对应一个watcher\r\n// 1个属性也可以被多个组件使用，所以 1个dep对应多个watcher\r\n// 所以 dep 和 watcher 是 多对多的关系\r\n\r\n//当我们创建渲染watcher的时候我们就会把当前的渲染watcher放到Dep.target上\r\n//调用 _render() 会取值，触发属性的 get\r\nclass Watcher{\r\n  /**\r\n   * @param vm 组件实例\r\n   * @param fn 更新组件的方法\r\n   * @param options 是否是一个渲染watcher\r\n   */\r\n  constructor(vm,fn,options){\r\n    //id 用来区分每个组件的watcher\r\n    this.id = id++;\r\n    //是否是一个渲染watcher\r\n    this.renderWatcher = options;\r\n    //getter 意味着调用这个函数可以发生取值操作,也就是收集依赖\r\n    this.getter = fn;\r\n    // 后续实现计算属性和一些清楚工作的时候需要用到dep\r\n    // 比如说某个组件卸载了，需要再dep中移除当前watcher\r\n    // 所以再这里还需要将dep也记录收集一下\r\n    this.deps = [];\r\n    this.depsId = new Set();\r\n\r\n    //是否懒加载\r\n    this.lazy = options.lazy;\r\n    //是否是脏\r\n    this.dirty = this.lazy;\r\n\r\n    this.vm = vm;\r\n\r\n    //初始的时候调用一下 getter\r\n    //如果是懒加载，那么第一次时不用执行的\r\n    this.lazy ? undefined :this.get();\r\n  }\r\n  //获取计算属性处理结果(计算属性watcher)\r\n  evaluate(){\r\n    //执行get方法获取到用户定义的计算属性的getters的返回值\r\n    this.value = this.get();\r\n    //重新定义为脏\r\n    this.dirty = false;\r\n  }\r\n  get(){\r\n    pushTarget(this);//缓存当前 watcher 实例\r\n    let value = this.getter.call(this.vm);//会去vm上取值\r\n    popTarget();//重新出栈\r\n    return value\r\n  }\r\n  addDep(dep){\r\n    // 一个组件 watcher 中，可能会使用多个重复的属性，重复的属性不需要记录\r\n    let id = dep.id;\r\n    if(!this.depsId.has(id)){\r\n      this.deps.push(dep); //watcher记录dep\r\n      this.depsId.add(id);\r\n      dep.addSub(this);//dep记录watcher\r\n    }\r\n  }\r\n  /**让属性收集watcher */\r\n  depend(){\r\n    let i = this.deps.length;\r\n    while(i--){\r\n      // 让计算属性依赖的属性去收集上层的渲染watcher\r\n      this.deps[i].depend();\r\n    }\r\n  }\r\n  /**重新更新 */\r\n  update(){\r\n    if(this.lazy){\r\n      // 计算属性watcher，将标识计算属性是脏值\r\n      this.dirty = true;\r\n    }else{\r\n      // this.get();\r\n      // 异步更新先将当前 watcher 暂存起来\r\n      queueWatcher(this);\r\n    }\r\n  }\r\n  run(){\r\n    this.get();\r\n  }\r\n}\r\n\r\n/**刷新执行队列命令 */\r\nfunction flushSchedulerQueue(){\r\n  // 在刷新的过程中可能还有新的watcher加入，重新放到queue中，所以先复制一份queue\r\n  let flushQueue = queue.slice(0);\r\n  queue = [];\r\n  has = {};\r\n  pending = false;\r\n  flushQueue.forEach(q => q.run());\r\n}\r\n\r\nlet queue = [];\r\nlet has = {};\r\nlet pending = false;//防抖\r\n/**缓存watcher */\r\nfunction queueWatcher(watcher){\r\n  let id = watcher.id;\r\n  if(!has[id]){\r\n    queue.push(watcher);\r\n    has[id] = true;\r\n    \r\n    if(!pending){\r\n      nextTick(flushSchedulerQueue, 0);\r\n      pending = true;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**执行nextTick队列任务 */\r\nfunction flushCallbacks(){\r\n  let cbs = callbacks.slice(0);\r\n  callbacks = [];\r\n  waiting = false;\r\n  cbs.forEach(cb => cb());\r\n}\r\n\r\nlet callbacks = [];\r\nlet waiting = false;\r\n/**\r\n * 异步更新回调\r\n * nextTick 不是创建了一个异步任务，而是将这个任务维护到了队列中而已\r\n */\r\nexport function nextTick(cb){\r\n  callbacks.push(cb);\r\n  if(!waiting){\r\n    //创建异步任务的时候，在vue2中，并没有直接使用某个API，而是使用优雅降级的方式\r\n    //（vue3中因为已经不在兼容ie了，所以直接采用了promise）\r\n    //内部先采用优先顺序是： \r\n    // promise（ie不兼容）\r\n    // MutationObserver（H5新接口，只能在浏览器中使用）\r\n    // setImmediate（ie专享）\r\n    // setTimeout\r\n    // setTimeout(()=>{flushCallbacks();},0);\r\n    timerFunc();\r\n    waiting = true;\r\n  }\r\n}\r\n\r\n/**异步任务适配 */\r\nlet timerFunc;\r\nif(Promise){\r\n  timerFunc = () => {\r\n    Promise.resolve().then(flushCallbacks);\r\n  }\r\n}else if(MutationObserver){\r\n  let observer = MutationObserver(flushCallbacks);\r\n  let textNode = document.createTextNode(1);\r\n  observer.observe(textNode,{\r\n    characterData:true\r\n  });\r\n  timerFunc = () => {\r\n    textNode.textContent = 2\r\n  }\r\n}else if(setImmediate){\r\n  timerFunc = () => {\r\n    setImmediate(flushCallbacks);\r\n  }\r\n}else if(setImmediate){\r\n  timerFunc = () => {\r\n    setTimeout(flushCallbacks,0);\r\n  }\r\n}\r\n\r\nexport default Watcher;","/**生成虚拟节点，也就是vue中的 h(), _c() */\r\nexport function createElementVNode(vm,tag,data,...children){\r\n  if(data == null) data = {};\r\n  let key = data.key;\r\n  if(key){\r\n    delete data.key;\r\n  }\r\n  return vnode(vm,tag,key,data,children);\r\n}\r\n\r\n/**生成文本虚拟节点，_v() */\r\nexport function createTextVNode(vm,text){\r\n  return vnode(vm,undefined,undefined,undefined,undefined,text);\r\n}\r\n\r\n/**\r\n * 创建虚拟节点\r\n * ast做的事语法层面的转化，\r\n * vnode描述的DOM元素，可以增加一些自定义的属性\r\n */\r\nfunction vnode(vm,tag,key,data,children,text){\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    data,\r\n    children,\r\n    text\r\n  }\r\n}","import Watcher from \"./observe/watcher\";\r\nimport { createElementVNode, createTextVNode } from \"./vdom\"\r\n\r\n/**创建真实DOM */\r\nfunction createElm(vnode){\r\n  let {tag,data,children,text} = vnode;\r\n  if(typeof tag === 'string'){\r\n    //标签\r\n    //将真实DOM挂载到虚拟DOM上，方便后续修改属性\r\n    vnode.el = document.createElement(tag);\r\n    // 设置属性\r\n    patchProps(vnode.el,data);\r\n    // 添加子节点\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child));\r\n    })\r\n  }else{\r\n    //tag为undefined就是个文本节点\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\n/**更新和初始化真实DOM的属性 */\r\nfunction patchProps(el,props){\r\n  for(let key in props){\r\n    if(key === 'style'){//值是 [{color:'red'}]\r\n      for(let styleName in props.style){\r\n        el.style[styleName] = props.style[styleName];\r\n      }\r\n    }else{\r\n      el.setAttribute(key,props[key]);\r\n    }\r\n  }\r\n}\r\n\r\n/**初始化和更新DOM */\r\nfunction patch(oldNode,vnode){\r\n  console.log(vnode);\r\n  //真实DOM中才有nodeType\r\n  const isRealElement = oldNode.nodeType;\r\n  if(isRealElement){\r\n    //是真实DOM，进行初始化挂载\r\n    let elm = oldNode;//当前节点\r\n    let parentElm = elm.parentNode;\r\n    //创建真实DOM\r\n    let newElm = createElm(vnode);\r\n    //先在原来的后面添加节点，然后再删除老节点\r\n    parentElm.insertBefore(newElm,elm.nextSibiling);//添加新节点\r\n    parentElm.removeChild(elm);//删除老节点\r\n    return newElm;\r\n  }else{\r\n    //diff 算法，对比两个虚拟DOM\r\n  }\r\n}\r\n\r\nexport function initLifeCycle(Vue){\r\n  /**将虚拟DOM转化成真实DOM */\r\n  Vue.prototype._update = function(vnode){\r\n    const vm = this;\r\n    const el = vm.$el;\r\n    //patch 既有初始化的功能，又有更新的方法\r\n    vm.$el = patch(el,vnode);\r\n  }\r\n  /**生成虚拟节点 */\r\n  Vue.prototype._c = function(){\r\n    return createElementVNode(this,...arguments);\r\n  }\r\n  /**生成文本虚拟节点 */\r\n  Vue.prototype._v = function(){\r\n    return createTextVNode(this,...arguments);\r\n  }\r\n  /**生成虚拟DOM */\r\n  Vue.prototype._s = function(value){\r\n    if(typeof value !== 'object') return value;\r\n    return JSON.stringify(value);\r\n  }\r\n  /**生成虚拟DOM */\r\n  Vue.prototype._render = function(){\r\n   const vm = this;\r\n   //当渲染的时候回去实例中取值，就可以将属性和视图绑定在一起了\r\n   return vm.$options.render.call(vm);//通过ast语法转义后生成的render方法\r\n  }\r\n}\r\n\r\n/**将组件挂载到DOM上 */\r\nexport function mountComponent(vm,el){\r\n  // 将节点挂载到实例上，方便之后访问\r\n  vm.$el = el;\r\n  // 1.调用render方法产生虚拟节点，虚拟DOM\r\n  const updateComponent = () => {\r\n    vm._update(vm._render());\r\n  }\r\n\r\n  new Watcher(vm,updateComponent,true);\r\n  \r\n\r\n  // 2.根据虚拟DOM产生真实DOM\r\n\r\n  // 3.插入到el元素中\r\n\r\n}\r\n\r\n/**\r\n * vue核心流程\r\n * 1.创造响应式数据\r\n * 2.模版转换成ast语法树\r\n * 3.将ast语法树转换成了render函数\r\n * 4.后续每次数据更新可以只执行render函数（无需再次执行ast转化的过程）\r\n */\r\n\r\n// render 函数会去产生虚拟节点（使用响应式数据）\r\n// 根据生成的虚拟节点创造正式的DOM\r\n\r\n// ---------------------------------------------------------------------\r\n\r\n/**调用选项中的生命钩子函数 */\r\nexport function callHook(vm,hook){\r\n  const handlers = vm.$options[hook];\r\n  if(handlers){\r\n    handlers.forEach(handler => handler.call(vm));\r\n  }\r\n}\r\n","// 重写数组中的部分方法\r\nlet oldArrayProto = Array.prototype;\r\n// 先复制一份原型\r\nexport let newArrayProto = Object.create(oldArrayProto);\r\n\r\n//列举出所有需要重新的方法\r\nlet methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'reverse',\r\n  'splice'\r\n];\r\n\r\n// 开始重新方法\r\nmethods.forEach(item => {\r\n  //重写方法\r\n  newArrayProto[item] = function(...args){\r\n    // 内部还是调用原来的方法\r\n    const result = oldArrayProto[item].call(this,...args);\r\n    // 当新增数据时，还需要对新数据进行观察\r\n    let inserted;\r\n    let ob = this.__ob__;\r\n    switch(item){\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n        break;\r\n      case 'splice'://[1,2,3].splice(1,0,4,5);表示在2的位置插入 4，5\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if(inserted){\r\n      //对新增的数据进行观测\r\n      //这里唯一可以拿到的关联数据就是this，但是我们需要调用 Observer 中的 observeArray 来观察新数据\r\n      //而在创建 Observer 的时候又将 实例挂载到了 __ob__ 上，所以\r\n      ob.observeArray(inserted);\r\n    }\r\n\r\n    //数组变化了，通知对应的watcher实现更新\r\n    ob.dep.notify();\r\n    \r\n    return result;\r\n  }\r\n})","import { newArrayProto } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\n/**通过 Object.defineProperty来劫持数据 */\r\nexport function observe(data){\r\n  //只能对对象进行劫持，所以要先进行判断\r\n  if(typeof data !== 'object' || data === null){\r\n    return;\r\n  }\r\n  //如果data 上有 __ob__ 并且是 Observer 时说明，这个对象已经被观测过了\r\n  if(data.__ob__ instanceof Observer){\r\n    return;\r\n  }\r\n\r\n  //如果一个对象已经被劫持过了，那就不用再被劫持\r\n  //（需要判断一个对象是否被劫持过，可以增添一个实例，用实例来判断是否被劫持过）\r\n  return new Observer(data);\r\n}\r\n\r\n/**观察者（被劫持对象） */\r\nclass Observer{\r\n  constructor(data){\r\n\r\n    //给每个对象都增加收集功能\r\n    this.dep = new Dep();\r\n\r\n    //Object.defineProperty只能劫持已经存在的属性（vue里面会为添加，删除属性的方法添加一些api，如$set,$delete）\r\n    \r\n    //将当前实例赋值给__ob__属性保存下来，方便在其他的地方调用实例的方法\r\n    //并且添加这个标识之后就可以知道这个数据已经被观察过了，不用在进行观察\r\n    // data.__ob__ = this;\r\n    //不过直接这样添加的话，在调用 this.walk(data) 的时候会形成死循环，可以这样解决\r\n    Object.defineProperty(data,\"__ob__\",{\r\n      value:this,\r\n      enumerable:false,//不可枚举，循环时就获取不了\r\n    })\r\n\r\n    if(Array.isArray(data)){\r\n      //当值为数组的也是可以对其进行劫持的，但是数组长度很长的时候就会非常消耗性能\r\n      //而且一般也不会通过索引来访问很设置值，所以vue中并不会劫持数组，而是重构数组的方法来实现响应式数据\r\n      data.__proto__ = newArrayProto;\r\n      //如果数组中的某个元素是对象的时候也是需要对其进行劫持的\r\n      this.observeArray(data);\r\n    }else{\r\n      this.walk(data);\r\n    }\r\n  }\r\n  walk(data){\r\n    //循环对象，对每个数据都进行劫持\r\n    //每次劫持都是一个重新定义属性的过程，所以会比较耗性能\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data,key,data[key]);\r\n    })\r\n  }\r\n  observeArray(data){\r\n    data.forEach(item => observe(item));\r\n  }\r\n}\r\n\r\n/**重新定义属性 */\r\nexport function defineReactive(target,key,value){\r\n  //如果值是对象，那么还需要继续对数据进行劫持\r\n  let childOb = observe(value);//childOb.dep 用来收集依赖\r\n  //为每个属性创建一个dep,闭包中不会被销毁\r\n  let dep = new Dep();\r\n  //这里用到了 闭包 来保存 value 值。\r\n  Object.defineProperty(target,key,{\r\n    get(){\r\n      //取值时\r\n      if(Dep.target){//当进行普通的取值使用的时候不需要进行依赖收集\r\n        dep.depend();//让这个属性的收集器记住当前的watcher\r\n        if(childOb){\r\n          //让数组和对象本身也实现依赖收集\r\n          childOb.dep.depend();\r\n          //如果值是一个数组的话，还需要对里面的值进行依赖收集\r\n          //解决多维数组的问题\r\n          if(Array.isArray(value)){\r\n            dependArray(value);\r\n          }\r\n        }\r\n      }\r\n      return value;\r\n    },\r\n    set(newVal){\r\n      //设置值时\r\n      if(newVal === value) return;\r\n      //如果设置的值是一个对象时，需要继续对这个对象进行劫持\r\n      observe(newVal);\r\n      value = newVal;\r\n      dep.notify();//设置值的时候通知watcher更新渲染\r\n    }\r\n  })\r\n}\r\n\r\n/**收集数组数据的依赖 */\r\nfunction dependArray(value){\r\n  for(let i = 0;i < value.length;i++){\r\n    let current = value[i];\r\n    current.__ob__ && current.__ob__.dep.depend();\r\n    if(Array.isArray(current)){\r\n      dependArray(current);\r\n    }\r\n  }\r\n}","import { observe } from \"./observe\";\r\nimport Dep from \"./observe/dep\";\r\nimport Watcher from \"./observe/watcher\";\r\n\r\n/**初始化状态 */\r\nexport function initState(vm){\r\n  const opts = vm.$options;//获取用户的选项\r\n  if(opts.data){\r\n    //初始化数据，生成相应式数据\r\n    initData(vm);\r\n  }\r\n  if(opts.computed){\r\n    //初始化计算属性\r\n    initComputed(vm);\r\n  }\r\n}\r\n\r\n/**初始化数据，生成相应式数据 */\r\nfunction initData(vm){\r\n  let data = vm.$options.data;\r\n  //如果data 是函数还需要先执行才能回去到要劫持的数据\r\n  data = typeof data === 'function' ? data.call(vm) : data;\r\n  \r\n  //进行数据劫持，来创建响应式数据\r\n  observe(data);\r\n\r\n  //为了方便之后访问 data，给实例挂载一个 _data\r\n  vm._data = data;\r\n  //但是这样的话就需要使用 vm._data.xxx 来访问，这样不够优雅\r\n  //所以可以将 vm._data 用vm来代理就可以用 vm.xxx来访问 _data 中的属性了\r\n  for(let key in data){\r\n    proxy(vm,'_data',key);\r\n  }\r\n}\r\n\r\n/**代理 */\r\nfunction proxy(vm,target,key){\r\n  Object.defineProperty(vm,key,{\r\n    get(){\r\n      return vm[target][key]\r\n    },\r\n    set(newVal){\r\n      vm[target][key] = newVal\r\n    }\r\n  })\r\n}\r\n\r\n/**初始化计算属性 */\r\nfunction initComputed(vm){\r\n  const computed = vm.$options.computed;\r\n  //将计算属性的所有watcher都保存到vm上\r\n  const watchers = vm._computedWatchers = {};\r\n  for(let key in computed){\r\n    let userDef = computed[key];\r\n    //需要一个computed 的 watcher 来维护计算属性，方便实现之后的缓存\r\n    //需要监控计算属性中的get变化\r\n    let fn = typeof userDef == 'function' ? userDef : userDef.get;\r\n    //如果直接new Watcher默认就会执行fn,所以需要添加一个{lazy:true}来让他在使用的时候再至执行\r\n    //将计算属性和wathcer对应起来\r\n    watchers[key] = new Watcher(vm,fn,{lazy:true});\r\n\r\n    defineComputed(vm,key,userDef);\r\n  }\r\n}\r\n\r\n/**为实例挂载上计算属性 */\r\nfunction defineComputed(target,key,userDef){\r\n  //getter可能是一个 function 也可能是对象\r\n  const getter = typeof userDef == 'function' ? userDef : userDef.get;\r\n  const setter = userDef.set || (()=>{});\r\n  //当调用 render 渲染函数的时候，会访问计算属性\r\n  //计算属性函数调用的时候也会访问data的属性，从而获取到完整的值\r\n  //但是不能直接使用watcher，因为需要检查依赖的属性是否发生变化\r\n  Object.defineProperty(target,key,{\r\n    get:createComputedGetter(key),\r\n    set:setter,\r\n  })\r\n}\r\n\r\n//计算属性根本不会收集依赖，只会让自己的依赖属性去收集依赖\r\n/**创建计算属性getter */\r\nfunction createComputedGetter(key){\r\n  return function (){\r\n    //当前 this 是指向 vm 的\r\n    //所以 可以直接从this 上获取到全部的 计算属性watcher\r\n    const watcher = this._computedWatchers[key];\r\n    if(watcher.dirty){\r\n      // 执行用户传入的getter\r\n      watcher.evaluate();\r\n    }\r\n    /**\r\n     * 在计算属性依赖的属性发生变化的时候触发的是计算属性的watcher更新\r\n     * 并不会触发 渲染watcher的更新 ，所以页面并不会更新\r\n     * 所以计算属性依赖的属性也需要去收集 渲染watcher\r\n     */\r\n    //当第一次渲染的时候执行了 watcher 中 get 方法\r\n    //此时 渲染watcher 会被存放到wathcer缓存栈中\r\n    //在渲染的过程中发现使用到了计算属性，然后 计算属性watcher 被创建，并存放到 watcher 缓存栈中\r\n    //此时的watcher缓存栈就是 [渲染watcher，计算属性watcher]\r\n    //之后 计算属性watcher 调用evaluate()取值后出栈，watcher缓存栈就剩下 渲染watcher\r\n    //所以 watcher缓存栈 栈顶就是渲染watcher （Dep.target）\r\n    //所以可以让计算属性依赖的属性去收集上层的watcher（渲染watcher）\r\n    if(Dep.target){\r\n      watcher.depend();\r\n    }\r\n    return watcher.value;\r\n  }\r\n}","import { compileToFunction } from \"./compiler\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\nimport { mergeOptions } from \"./utils\";\r\n\r\n/**\r\n * 初始化函数，就是为Vue添加_init方法\r\n * @param { Vue构造函数 } Vue \r\n */\r\nexport function initMixin(Vue){\r\n  Vue.prototype._init = function(options){\r\n    //将 options 挂载到 实例的 $options 上方便后续方法的访问\r\n    const vm = this;\r\n    //合并选项并赋值,定义的全局过滤器，指令等都会挂载上去\r\n    // this 指向Vue实例，在实例上没有constructor，但是会在原型链上查找\r\n    vm.$options = mergeOptions(this.constructor.options,options);\r\n    \r\n    // 调用生命周期函数\r\n    callHook(vm,\"beforeCreate\");\r\n    // 初始化状态，计算属性，watch\r\n    initState(vm);\r\n    // 调用生命周期函数\r\n    callHook(vm,\"beforeCreate\");\r\n\r\n    // 实现数据的挂载\r\n    if(options.el){\r\n      vm.$mount(options.el);\r\n    }\r\n  }\r\n  Vue.prototype.$mount = function(el){\r\n    const vm = this;\r\n    el = document.querySelector(el);\r\n    let opts = vm.$options;\r\n    //优先级 render > template > el\r\n    if(!opts.render){//查看是否有render函数\r\n      // 没有render函数，表示并不是用户自己写的渲染方法\r\n      // 如果没有template，有el就使用el作为模版，如果有template就使用template\r\n      let template;\r\n      if(!opts.template && el){\r\n        template = el.outerHTML;\r\n      }else{\r\n        if(el){//如果有el则采用模版内容\r\n          template = opts.template;\r\n        }\r\n      }\r\n      if(template){\r\n        //这里需要对模版进行编译\r\n        const render = compileToFunction(template);\r\n        opts.render = render;// jsx 最终会被编译成 h('xxx')\r\n      }\r\n    }\r\n\r\n    //组件挂载\r\n    mountComponent(vm,el);\r\n\r\n    //最终就可以获取render方法\r\n\r\n    // script 标签引用的 vue.global.js 这个编译过程是在浏览器运行的\r\n    // runtime 是不包含模版编译的，整个编译时打包的时候通过loader来进行转义.vue文件的\r\n    // 所以用runtime的时候不能使用template\r\n  }\r\n}","import { initGlobalAPI } from \"./globalAPI\";\r\nimport { initMixin } from \"./init\";\r\nimport { initLifeCycle } from \"./lifecycle\";\r\nimport { nextTick } from \"./observe/watcher\";\r\n\r\n// 不使用 class 来定义Vue 原因是，class会将所有的方法都封装到一起，导致耦合度过大，不便于管理和拆分\r\nfunction Vue(options){//options 就是用户的选项\r\n  this._init(options);\r\n}\r\n\r\n// 添加方法\r\nVue.prototype.$nextTick = nextTick;\r\ninitMixin(Vue);\r\ninitLifeCycle(Vue);\r\ninitGlobalAPI(Vue);\r\n\r\nexport default Vue;"],"names":["mergeOptions","parent","child","options","key","mergeField","hasOwnProperty","strats","LIFECYCLE","forEach","hook","p","c","concat","initGlobalAPI","Vue","mixin","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","start","node","push","chars","text","replace","end","pop","length","advance","substring","parseStartTag","match","tagName","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","i","obj","split","item","JSON","stringify","slice","defaultTagRE","gen","codegen","test","token","lastIndex","exec","index","trim","join","genChildren","map","ast","code","compileToFunction","template","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Watcher","vm","fn","renderWatcher","getter","deps","depsId","Set","lazy","dirty","undefined","get","call","dep","has","add","addSub","depend","queueWatcher","flushSchedulerQueue","flushQueue","queue","pending","q","run","nextTick","flushCallbacks","cbs","callbacks","waiting","cb","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","createElementVNode","data","vnode","createTextVNode","createElm","el","createElement","patchProps","appendChild","props","styleName","style","setAttribute","patch","oldNode","console","log","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibiling","removeChild","initLifeCycle","prototype","_update","$el","_c","arguments","_v","_s","_render","$options","mountComponent","updateComponent","callHook","handlers","handler","oldArrayProto","Array","newArrayProto","Object","create","methods","args","result","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","childOb","dependArray","set","newVal","current","initState","opts","initData","computed","initComputed","_data","proxy","watchers","_computedWatchers","userDef","defineComputed","setter","createComputedGetter","evaluate","initMixin","_init","constructor","$mount","querySelector","outerHTML","$nextTick"],"mappings":"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"}