{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/globalAPI.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["/**合并选项 */\nexport function mergeOptions(parent,child){\n  const options = {};//定义一个新对象用来存储合并后的对象\n  //先合并父选项\n  for(let key in parent){\n    mergeField(key);\n  }\n  //再用子选项来覆盖和合并父选项\n  for(let key in child){\n    if(!parent.hasOwnProperty(key)){\n      mergeField(key);\n    }\n  }\n  function mergeField(key){\n    //采用策略模式减少 if/else\n    //如果不在策略中优先使用子\n    if(strats[key]){\n      options[key] = strats[key](parent[key],child[key]);\n    }else{\n      //优先使用子的，再使用父的\n      options[key] = child[key] || parent[key];\n    }\n  }\n  return options;\n}\n\n//策略模式\nconst strats = {};\nconst LIFECYCLE = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n];\n//生命周期函数的合并策略\nLIFECYCLE.forEach(hook => {\n  strats[hook] = function(p,c){\n    // 第一次合并：{} + {created:fn} => {created:[fn]}\n    // 第二次合并：{created:fn1} + {created:fn2} => {created:[fn1,fn2]}\n    if(c){\n      if(p){\n        // 父子都有\n        return p.concat(c);\n      }else{\n        // 只有子有,初始化过程\n        return [c];\n      }\n    }else{\n      // 如果子没有，就直接使用父的\n      // 只要经过初始化过程， 父 就已经是个数组\n      // 如 {created:[fn]} + {a:1}\n      return p;\n    }\n  }\n})\n\n//组件的合并策略\nstrats.components = function(parentVal,childVal){\n  let res = Object.create(parentVal);\n  if(childVal){\n    for(let key in childVal){\n      //返回的是构造的对象，可以拿到父亲原型上的属性\n      //并将儿子的都拷贝到自己身上\n      res[key] = childVal[key];\n    }\n  }\n  console.log(res);\n  return res;\n}","import { mergeOptions } from \"./utils\";\n\nexport function initGlobalAPI(Vue){\n  //Vue静态属性和方法\n  Vue.options = {\n    _base:Vue,//存储一下Vue,在创建组件虚拟DOM的时候需要使用到Vue上的静态方法\n  };\n  Vue.mixin = function(mixin){\n    //将用户选项和全局的options合并\n    this.options = mergeOptions(this.options,mixin);\n    return this;\n  }\n  /** 可以手动创建组件进行挂载*/\n  Vue.extend = function(options){\n    //子类，最终在时候组件的时候就是new一个实例\n    //就是实现根据用户的参数返回一个构造函数而已\n    function Sub(options = {}){\n      //默认对子类进行初始化\n      this._init(options);\n    }\n    //继承Vue\n    Sub.prototype = Object.create(Vue.prototype);\n    Sub.prototype.constructor = Sub;\n    //保存options数据,但是要合并全局的options\n    Sub.options = mergeOptions(Vue.options,options);\n\n    return Sub;\n  }\n  //全局组件\n  Vue.options.components = {};\n  /**注册全局组件 */\n  Vue.component = function(id,definition){\n    // 如果 definition 是一个函数就不用再使用 Vue.extend 进行包装了\n    definition = typeof definition === 'function' ? definition : Vue.extend(definition);\n    Vue.options.components[id] = definition;\n  }\n}","/**\n * 一般解析html 都不会自己去写，可以使用第三方包，htmlparser2\n * 也可以在 https://astexplorer.net/ 感受 ast的转化\n */\n\n//可视化正则表达式 https://regexper.com\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;//匹配标签名\n//?:代表不捕获分组,使用match后将不会?:的分组不会出现\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;//匹配标签名和带命名空间的标签,如<namespace:div>\n//匹配开始标签\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);//匹配到的分组是一个标签名 <div 匹配到的分组就是开始标签的名字\n//匹配结束标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);//匹配的是 </xxx> 最终匹配到的分组就是结束标签的名字\n//匹配属性,第一个属性就是 key，value 就是 分组3/4/5\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>']+)))?/;\n//匹配闭合标签 > 或者 />\nconst startTagClose = /^\\s*(\\/?)>/;// /> <br/>\n\n\n//解析html,vue3并不是使用正则来进行匹配的\nexport function parseHTML(html){\n  const ELEMENT_TYPE = 1;\n  const TEXT_TYPE = 3;\n  const stack = [];//用来存放元素的栈\n  let currentParent;//指向栈顶元素\n  let root;//根节点\n  //----------------- 转成 ast -------------------\n  //创建ast元素\n  function createASTElement(tag,attrs){\n    return {\n      tag,\n      attrs,\n      type:ELEMENT_TYPE,\n      children:[],\n      parent:null\n    }\n  }\n  //获取开始标签回调\n  function start(tag,attrs){\n    let node = createASTElement(tag,attrs);\n    if(!root){//如果还没有根节点，当前ast节点就是根节点\n      root = node;\n    }\n    if(currentParent){\n      node.parent = currentParent;\n      currentParent.children.push(node);\n    }\n    stack.push(node);\n    currentParent = node;\n  }\n  //获取标签中内容回调\n  function chars(text){\n    text = text.replace(/\\s/g,'');\n    // 文本直接放到当前节点中\n    text && currentParent.children.push({\n      type:TEXT_TYPE,\n      text,\n      parent:currentParent\n    })\n  }\n  //获取结束标签回调\n  function end(tag){\n    stack.pop();//每次遇到结束标签都进行出栈操作\n    currentParent = stack[stack.length - 1];//重新指向栈顶\n  }\n  //----------------- 转成 ast -------------------\n\n  //截取内容\n  function advance(length){\n    html = html.substring(length);\n  }\n  //匹配解析开始标签\n  function parseStartTag(){\n    const start = html.match(startTagOpen);\n    if(start){\n      // 是开始标签\n      const match = {\n        tagName:start[1],//标签名\n        attrs:[],\n      }\n      //每次匹配成功都将成功的部分删除掉，然后继续匹配，这样就不会重复匹配之前的\n      advance(start[0].length);\n\n      //如果不是开始标签的结束就一直匹配下去\n      let attr,end;\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\n        //删除长度\n        advance(attr[0].length);\n        //保存属性\n        match.attrs.push({name:attr[1],value:attr[3]||attr[4]||attr[5]||true})\n      }\n      //匹配完成后，如果有 开始标签的结束 就把结束也删除\n      if(end){\n        advance(end[0].length);\n      }\n      return match;\n    }\n    //不是开始标签\n    return false;\n  }\n  //html 最开始肯定是一个 <\n  while(html){\n    let textEnd = html.indexOf(\"<\");\n    //如果textEnd是0 表示 是标签，如<div id=\"app\">{{name}}</div>\n    //可能是开始标签，一开始的时候是开始标签 <div id=\"app\">\n    //也可能是结束标签，\n    //  因为每次匹配到内容都会把响应的内容删除掉，\n    //  所以在匹配到开始标签之后textEnd > 0 再匹配到文本，最后就剩下 </div>\n    if(textEnd === 0){\n      //开始标签的匹配结果\n      const startTagMatch = parseStartTag();\n      if(startTagMatch){\n        //抛出数据，生成ast\n        start(startTagMatch.tagName,startTagMatch.attrs);\n        continue;\n      }\n\n      //结束标签的匹配结果\n      const endTagMatch = html.match(endTag);\n      if(endTagMatch){\n        //抛出数据，生成ast\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n    }\n    //如果 textEnd > 0 就是文本的结束位置\n    if(textEnd > 0){\n      //标签中的内容\n      let text = html.substring(0,textEnd);\n      if(text){\n        //抛出数据，生成ast\n        chars(text);\n        advance(text.length);\n      }\n    }\n  }\n  return root;\n}","import { parseHTML } from \"./parse\";\n\n/**生成属性代码 */\nfunction genProps(attrs){\n  let str = '';\n  for(let i = 0;i < attrs.length;i++){\n    let attr = attrs[i];\n    if(attr.name == 'style'){\n      //如果是 style 就将值转换成对象,color:red;background:red -> {color:'red',background:'red'}\n      let obj = {};\n      attr.value.split(';').forEach(item=>{\n        let [key,value] = item.split(':');\n        obj[key] = value;\n      })\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0,-1)}}`;//去除最后一个 ,\n}\n\n//匹配表达式变量\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;//{{ xxx }}\n/**生成节点代码 */\nfunction gen(node){\n  if(node.type === 1){\n    //标签节点\n    return codegen(node);\n  }else{\n    //文本\n    let text = node.text;\n    if(defaultTagRE.test(text)){\n      //带模版语法的文本 {{name}} hello {{age}} world\n      let token = [];\n      //捕获匹配到的值\n      let match;\n      //因为正则表达式中的 g，\n      //在匹配的时候会把上一次匹配到的字符串的最后一个字符的索引用lastIndex保存，\n      //无论是 .test 还是 .match .exec 都会记录\n      //下次就会从lastIndex的位置开始匹配，\n      //有三种方式可以重置开始位置，1:重新设置 reg.lastIndex = 0 2:重新赋值表达式 reg = // 3:重新编译表达式 reg.compile()\n      defaultTagRE.lastIndex = 0;\n      let lastIndex = 0;//上次匹配到的位置\n      while(match = defaultTagRE.exec(text)){\n        let index = match.index;//当前匹配到的位置\n        if(index > lastIndex){\n          //如果上次匹配到的位置小于当前位置就把中间的这段内容也放进去\n          token.push(JSON.stringify(text.slice(lastIndex,index)));\n        }\n        token.push(`_s(${match[1].trim()})`);\n        lastIndex = index + match[0].length;\n      }\n      if(lastIndex < text.length){\n        token.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${token.join('+')})`;\n    }else{\n      //普通纯文本\n      return `_v('${text}')`;\n    }\n  }\n}\n/**生成children代码 */\nfunction genChildren(children){\n  return children.map(child => gen(child)).join(',');\n}\n\n/*生成渲染函数代码 */\nfunction codegen(ast){\n  let children = genChildren(ast.children);\n  let code = (\n    `_c(\n      '${ast.tag}',\n      ${ast.attrs.length > 0 ? genProps(ast.attrs): 'null'}\n      ${ast.children.length ? `,${children}`:''}\n    )`\n  );\n  return code;\n}\n\n/**编译模版形成渲染函数 */\nexport function compileToFunction(template){\n  // 1将template 转化成 ast 语法树\n  let ast = parseHTML(template);\n  // 2生成 render方法（render）,是用with指定执行上下文\n  // 模版引擎的原理就是 with + new Function(code)\n  let code = `with(this){return ${codegen(ast)};}`;\n  // 根据代码生成函数\n  let render = new Function(code);\n  return render;\n}","let id = 0;\nclass Dep{\n  constructor(){\n    this.id = id++;\n    // 属性的dep 需要收集 watcher\n    // 存放当前属性对应的watcher有哪些\n    this.subs = [];\n  }\n  depend(){\n    Dep.target.addDep(this);//让watcher记住dep\n  }\n  addSub(watcher){\n    this.subs.push(watcher);\n  }\n  /**通知watcher进行更新 */\n  notify(){\n    this.subs.forEach(watcher => watcher.update());\n  }\n}\n\n//添加一个静态属性，用来存放临时的 watcher\n//当 watcher 调用 get() 方法进行渲染的时候会去vm上取值，\n//取值的时候就会触发数据劫持的 get ，此时就可以将这个watcher进行收集了\nDep.target = null;\n\n/**watcher栈 */\nlet stack = [];\nexport function pushTarget(watcher){\n  stack.push(watcher);\n  Dep.target = watcher;\n}\nexport function popTarget(watcher){\n  stack.pop();\n  Dep.target = stack[stack.length - 1];\n}\n\nexport default Dep;","/**\n * 每一个组件都有一个watcher\n * 这样可以做的局部更新\n */\n\nimport Dep, { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0;\n\n// dep 和 watcher 就是观察者模式\n// 每个属性有一个 dep（属性就是被观察者），watcher就是观察者（属性变化了会通知观察者更新）\n\n// 需要给每个属性都增加一个dep,目的就是收集watcher\n// 一个组件中有多个属性（n个属性会对应一个视图）n个dep对应一个watcher\n// 1个属性也可以被多个组件使用，所以 1个dep对应多个watcher\n// 所以 dep 和 watcher 是 多对多的关系\n\n//当我们创建渲染watcher的时候我们就会把当前的渲染watcher放到Dep.target上\n//调用 _render() 会取值，触发属性的 get\nclass Watcher{\n  /**\n   * @param vm 组件实例\n   * @param exprOrFn 回调的方法\n   * @param options 是否是一个渲染watcher\n   */\n  constructor(vm,exprOrFn,options,cb){\n    //id 用来区分每个组件的watcher\n    this.id = id++;\n    //是否是一个渲染watcher\n    this.renderWatcher = options;\n\n    /**########################## watch相关 ########################## */\n    this.cb = cb;\n    //exprOrFn可能是函数也可能是字符串,所以需要统一先处理成函数\n    if(typeof exprOrFn === 'string'){\n      this.getter = function(){\n        return vm[exprOrFn];\n      }\n    }else{\n      //getter 意味着调用这个函数可以发生取值操作,也就是收集依赖\n      this.getter = exprOrFn;\n    }\n    //标识是否是用户自己定义的wathcer\n    this.user = options.user;\n    /**########################## watch相关 ########################## */\n    \n    /**########################## computed相关 ######################### */\n    // 后续实现计算属性和一些清楚工作的时候需要用到dep\n    // 比如说某个组件卸载了，需要再dep中移除当前watcher\n    // 所以再这里还需要将dep也记录收集一下\n    this.deps = [];\n    this.depsId = new Set();\n\n    //是否懒加载\n    this.lazy = options.lazy;\n    //是否是脏\n    this.dirty = this.lazy;\n    /**########################## computed相关 ######################### */\n\n    this.vm = vm;\n\n    //初始的时候调用一下 getter\n    //如果是懒加载，那么第一次时不用执行的\n    //存储第一次执行的值（老值） \n    this.value = this.lazy ? undefined :this.get();\n  }\n  //获取计算属性处理结果(计算属性watcher)\n  evaluate(){\n    //执行get方法获取到用户定义的计算属性的getters的返回值\n    this.value = this.get();\n    //重新定义为脏\n    this.dirty = false;\n  }\n  get(){\n    pushTarget(this);//缓存当前 watcher 实例\n    let value = this.getter.call(this.vm);//会去vm上取值\n    popTarget();//重新出栈\n    return value\n  }\n  addDep(dep){\n    // 一个组件 watcher 中，可能会使用多个重复的属性，重复的属性不需要记录\n    let id = dep.id;\n    if(!this.depsId.has(id)){\n      this.deps.push(dep); //watcher记录dep\n      this.depsId.add(id);\n      dep.addSub(this);//dep记录watcher\n    }\n  }\n  /**让属性收集watcher */\n  depend(){\n    let i = this.deps.length;\n    while(i--){\n      // 让计算属性依赖的属性去收集上层的渲染watcher\n      this.deps[i].depend();\n    }\n  }\n  /**重新更新 */\n  update(){\n    if(this.lazy){\n      // 计算属性watcher，将标识计算属性是脏值\n      this.dirty = true;\n    }else{\n      // this.get();\n      // 异步更新先将当前 watcher 暂存起来\n      queueWatcher(this);\n    }\n  }\n  run(){\n    //获取老值\n    let oldVal = this.value;\n    //获取新值\n    let newVal = this.get();\n    if(this.user){\n      //如果是用户自己定义wathcer 在值变化的时候就在执行一下回调\n      this.cb.call(this.vm,newVal,oldVal);\n    }\n  }\n}\n\n/**刷新执行队列命令 */\nfunction flushSchedulerQueue(){\n  // 在刷新的过程中可能还有新的watcher加入，重新放到queue中，所以先复制一份queue\n  let flushQueue = queue.slice(0);\n  queue = [];\n  has = {};\n  pending = false;\n  flushQueue.forEach(q => q.run());\n}\n\nlet queue = [];\nlet has = {};\nlet pending = false;//防抖\n/**缓存watcher */\nfunction queueWatcher(watcher){\n  let id = watcher.id;\n  if(!has[id]){\n    queue.push(watcher);\n    has[id] = true;\n    \n    if(!pending){\n      nextTick(flushSchedulerQueue, 0);\n      pending = true;\n    }\n  }\n}\n\n\n/**执行nextTick队列任务 */\nfunction flushCallbacks(){\n  let cbs = callbacks.slice(0);\n  callbacks = [];\n  waiting = false;\n  cbs.forEach(cb => cb());\n}\n\nlet callbacks = [];\nlet waiting = false;\n/**\n * 异步更新回调\n * nextTick 不是创建了一个异步任务，而是将这个任务维护到了队列中而已\n */\nexport function nextTick(cb){\n  callbacks.push(cb);\n  if(!waiting){\n    //创建异步任务的时候，在vue2中，并没有直接使用某个API，而是使用优雅降级的方式\n    //（vue3中因为已经不在兼容ie了，所以直接采用了promise）\n    //内部先采用优先顺序是： \n    // promise（ie不兼容）\n    // MutationObserver（H5新接口，只能在浏览器中使用）\n    // setImmediate（ie专享）\n    // setTimeout\n    // setTimeout(()=>{flushCallbacks();},0);\n    timerFunc();\n    waiting = true;\n  }\n}\n\n/**异步任务适配 */\nlet timerFunc;\nif(Promise){\n  timerFunc = () => {\n    Promise.resolve().then(flushCallbacks);\n  }\n}else if(MutationObserver){\n  let observer = MutationObserver(flushCallbacks);\n  let textNode = document.createTextNode(1);\n  observer.observe(textNode,{\n    characterData:true\n  });\n  timerFunc = () => {\n    textNode.textContent = 2\n  }\n}else if(setImmediate){\n  timerFunc = () => {\n    setImmediate(flushCallbacks);\n  }\n}else if(setImmediate){\n  timerFunc = () => {\n    setTimeout(flushCallbacks,0);\n  }\n}\n\nexport default Watcher;","\n/**是否是原始标签 */\nfunction isReservedTag(tag){\n  return ['a','div','span','ul','ol','li','button'].includes(tag);\n}\n\n/**生成虚拟节点，也就是vue中的 h(), _c() */\nexport function createElementVNode(vm,tag,data,...children){\n  if(data == null) data = {};\n  let key = data.key;\n  if(key){\n    delete data.key;\n  }\n\n  if(isReservedTag(tag)){\n    //是原始标签，返回虚拟dom\n    return vnode(vm,tag,key,data,children);\n  }else{\n    //不是原始标签，是组件标签，获取组件的定义\n    let  Ctor = vm.$options.components[tag];\n    //但是获取到的可能是组件的Sub类,也可能是一个组件定义的选项对象\n    //所以要将他转换成组件的虚拟dom\n    return createComponentVnode(vm,tag,key,data,children,Ctor);\n  }\n}\n\n/**创建 组件的虚拟dom */\nfunction createComponentVnode(vm,tag,key,data,children,Ctor){\n  if(typeof Ctor === 'object'){\n    //此时的vm是组件的子类Sub\n    Ctor = vm.$options._base.extend(Ctor);\n  }\n  data.hook = {\n    init(vnode){\n      //之后创建真实节点的时候如果是组件就调用init方法\n      //保存组件实例到虚拟节点上\n      let instance = vnode.componentInstance = new vnode.componentOptions.Ctor;\n      instance.$mount();\n    }\n  }\n  return vnode(vm,tag,key,data,children,null,{Ctor})\n}\n\n/**生成文本虚拟节点，_v() */\nexport function createTextVNode(vm,text){\n  return vnode(vm,undefined,undefined,undefined,undefined,text);\n}\n\n/**\n * 创建虚拟节点\n * ast做的事语法层面的转化，\n * vnode描述的DOM元素，可以增加一些自定义的属性\n */\nfunction vnode(vm,tag,key,data,children,text,componentOptions){\n  return {\n    vm,\n    tag,\n    key,\n    data,\n    children,\n    text,\n    componentOptions,//组件的构造函数\n  }\n}\n\n/**判断两个虚拟节点是否相同*/\nexport function isSameVnode(vnode1,vnode2){\n  return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key;\n}","import { isSameVnode } from \".\";\n\n\n/**创建组件真实DOM */\nfunction createComponent(vnode){\n  let i = vnode.data;\n  if((i = i.hook) && (i = i.init)){\n    i(vnode);//初始化组件，找到init方法\n  }\n  if(vnode.componentInstance){\n    return true;\n  }\n}\n\n/**创建真实DOM */\nexport function createElm(vnode){\n  let {tag,data,children,text} = vnode;\n  if(typeof tag === 'string'){\n    //标签\n\n    // 区分是组件还是元素\n    if(createComponent(vnode)){//组件\n      //在调用 createComponent-> vnode.data.hook.init 之后\n      // 创建了组件的真实dom，在实例上就有 $el 保存着组件的DOM\n      return vnode.componentInstance.$el;\n    }\n\n    //将真实DOM挂载到虚拟DOM上，方便后续修改属性\n    vnode.el = document.createElement(tag);\n    // 设置属性\n    patchProps(vnode.el,{},data);\n    // 添加子节点\n    children.forEach(child => {\n      vnode.el.appendChild(createElm(child));\n    })\n  }else{\n    //tag为undefined就是个文本节点\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\n/**更新和初始化真实DOM的属性 */\nexport function patchProps(el,oldProps = {},props = {}){\n  let oldStyle = oldProps.style || {};\n  let newStyle = props.style || {};\n  //老的有，新的没有，删除老的style\n  for(let key in oldStyle){\n    if(!newStyle[key]){\n      el.style[key] = '';\n    }\n  }\n  //老的有，新的没有，删除老的属性\n  for(let key in oldProps){\n    if(!props[key]){\n      el.removeAttribute(key);\n    }\n  }\n  //用新的覆盖老的\n  for(let key in props){\n    if(key === 'style'){//值是 [{color:'red'}]\n      for(let styleName in props.style){\n        el.style[styleName] = props.style[styleName];\n      }\n    }else{\n      el.setAttribute(key,props[key]);\n    }\n  }\n}\n\n/**初始化和更新DOM */\nexport function patch(oldVNode,vnode){\n  if(!oldVNode){\n    //组件挂载\n    //创建元素之后在实例vm上就有$el了\n    return createElm(vnode);\n  }\n  //真实DOM中才有nodeType\n  const isRealElement = oldVNode.nodeType;\n  if(isRealElement){\n    //是真实DOM，进行初始化挂载\n    let elm = oldVNode;//当前节点\n    let parentElm = elm.parentNode;\n    //创建真实DOM\n    let newElm = createElm(vnode);\n    //先在原来的后面添加节点，然后再删除老节点\n    parentElm.insertBefore(newElm,elm.nextSibiling);//添加新节点\n    parentElm.removeChild(elm);//删除老节点\n    return newElm;\n  }else{\n    //diff 算法，对比两个虚拟DOM\n    //diff 算法是一个平级比较的过程，父亲与父亲比较，儿子与儿子比较\n\n    patchVnode(oldVNode,vnode);\n  }\n}\n\n//1.两个接待你不是同一个节点，直接删除老的换上新的（没有比对）\n//2.两个节点是同一个节点（判断节点的tag和key）比较两个节点的属性是否有差异\n//3.节点比较完后就需要比较他们的子节点\n/**对比两个虚拟节点 */\nfunction patchVnode(oldVNode,vnode){\n  if(!isSameVnode(oldVNode,vnode)){\n    //两个节点不一样,用老节点的父亲进行替换\n    let el = createElm(vnode);\n    return oldVNode.el.parentNode.replaceChild(el,oldVNode.el);\n  }\n  let el = vnode.el = oldVNode.el;//复用老节点元素\n  //文本的情况 tag为undefined时为文本\n  if(!oldVNode.tag){//是文本\n    if(oldVNode.text !== vnode.text){\n      // 用新节点文本替换就节点文本\n      el.textContent = vnode.text;\n    }\n  }\n\n  // 是标签，需要比较标签的属性\n  patchProps(el,oldVNode.data,vnode.data);\n\n  // 比较两个的儿子节点，一方有儿子，一方没儿子，还有就是来两方都有儿子\n  let oldChildren = oldVNode.children || [];\n  let newChildren = vnode.children || [];\n  if(oldChildren.length > 0 && newChildren.length > 0){\n    //两方都有儿子，比较两个人的儿子\n    updateChildren(el,oldChildren,newChildren);\n  }else if(newChildren.length > 0){\n    //没有老的，有新的，新增子节点\n    //将新节点元素挂载到节点上\n    mountChildren(el,newChildren);\n  }else if(oldChildren.length > 0){\n    //有老的，没有新的，删除子节点\n    el.innerHTML = \"\";\n  }\n  return el;\n}\n\n/**挂载子元素的父元素上 */\nfunction mountChildren(el,children){\n  for(let i = 0; i < children.length;i++){\n    let child = children[i];\n    el.appendChild(createElm(child))\n  }\n}\n\n/**对比更新两个子节点 */\nfunction updateChildren(el,oldChildren,newChildren){\n  //在vue2中采用双指针的方式来进行两子节点的对比，这样就会性能会比较高\n  /**场景1:头部比对\n   *    s1    e1\n   *    |     |\n   * o: a  b  c \n   * n: a  b  c  d\n   *    |        |\n   *    s2       e2\n   */\n  /**\n   * 对新老子节点列表，分别定义两个指针，\n   * 老节点开始指针 s1,老节点结束指针 e1\n   * 新节点开始指针 s1,新节点结束指针 e1\n   * ---------- 新增的情况 ------------\n   * 两组节点列表同时开始进行遍历循环，开始的时候 s1 和 s2 同时执行各自的第一位元素\n   * 如果两个节点是相同的就移动到第二位继续进行对比，如果相同就继续上面的步骤，\n   * 直到 s1 指向的位置大于 e1 的位置的时候，老节点 s1 停止,s2继续往下，\n   * s2 指向 d,表示 d 是新增的，将d添加到 el 中\n   */\n  /**场景2:尾部比对\n   *       s1    e1\n   *       |     |\n   * o:    a  b  c \n   * n: d  a  b  c\n   *    ｜       ｜\n   *    s2       e2\n   */\n  /**场景3:交叉比对 e1 == s2\n   *    s1       e1\n   *    |        |\n   * o: a  b  c  d\n   * n: d  a  b  c\n   *    ｜       ｜\n   *    s2       e2\n   *\n  **场景4:交叉比对 s1 == e2\n   *    s1       e1\n   *    |        |\n   * o: a  b  c  d\n   * n: d  c  b  a\n   *    ｜       ｜\n   *    s2       e2\n   */\n  /**场景5:乱序比对\n   *    s1       e1\n   *    |        |\n   * o: a  b  c  d\n   * n: d  c  b  a\n   *    ｜       ｜\n   *    s2       e2\n   */\n  let oldStartIndex = 0;//老节点开始指针\n  let newStartIndex = 0;//新节点开始指针\n  let oldEndIndex = oldChildren.length - 1;//老节点结束指针\n  let newEndIndex = newChildren.length - 1;//新节点结束指针\n\n  let oldStartVnode = oldChildren[0];\n  let newStartVnode = newChildren[0];\n  let oldEndVnode = oldChildren[oldEndIndex];\n  let newEndVnode = newChildren[newEndIndex];\n\n  /**创建 节点索引映射 */\n  function makeIndexByKey(children){\n    let map = {}\n    children.forEach((child,index)=>{\n      map[child.key] = index;\n    })\n    return map;\n  }\n  let map = makeIndexByKey(oldChildren);\n\n  //双方有一方头指针大于尾部指针则停止循环\n  while(oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex){\n    //复用都是针对老的节点列表而言的\n    //在头部比对，尾部比对，交叉比对的情况下，都是将老节点在新节点指针的位置进行插入或者删除\n    //如果批量向页面中插入内容，浏览器会自动优化\n    \n    if(!oldStartVnode){//在乱序对比的时候，节点可能在移动后被移除\n      oldStartVnode = oldChildren[++oldStartIndex];\n    }else if(!oldEndVnode){//在乱序对比的时候，节点可能在移动后被移除\n      oldEndVnode = oldChildren[--oldEndIndex];\n    }else if(isSameVnode(oldStartVnode,newStartVnode)){// 从头部开始对比\n      //如果是相同节点就递归比价子节点\n      patchVnode(oldStartVnode,newStartVnode);\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    }else if(isSameVnode(oldEndVnode,newEndVnode)){//从尾部开始对比\n      patchVnode(oldEndVnode,newEndVnode);\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    }else if(isSameVnode(oldEndVnode,newStartVnode)){//交叉比对 新头和旧尾对比\n      patchVnode(oldEndVnode,newStartVnode);\n      //将老的尾巴移动到老的开头的前面\n      el.insertBefore(oldEndVnode.el,oldStartVnode.el);\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    }else if(isSameVnode(oldStartVnode,newEndVnode)){//交叉比对 新尾和旧头对比\n      patchVnode(oldStartVnode,newEndVnode);\n      //将老的头部移动到老末尾的下一个元素的前面\n      el.insertBefore(oldStartVnode.el,oldEndVnode.el.nextSibiling);\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    }else{\n      // 乱序比对\n      // 根据老的列表做一个映射关系，用新的去找，找到就移动，最后多余的就删除\n      let moveIndex = map[newStartVnode.key];\n      if(moveIndex !== undefined){\n        let moveVnode = oldChildren[moveIndex];//找到对应的虚拟节点复用\n        el.insertBefore(moveVnode.el,oldStartVnode.el);//将节点插入到老开始指针指向的节点之前\n        oldChildren[moveIndex] = undefined;//表示这个节点已经移动过了\n        patchVnode(moveVnode,newStartVnode);//对比属性和子节点\n      }else{\n        //没有找到，表示新增，将节点插入到老开始指针指向的节点之前\n        el.insertBefore(createElm(newStartVnode),oldStartVnode.el);\n      }\n      // 对比之后继续下一个对比\n      newStartVnode = newChildren[++newStartIndex];\n    } \n  }\n  //while结束说明有一方的头指针大于尾指针\n  //如果新节点头指针小于尾指针，说明之间的节点都是新增的\n  if(newStartIndex <= newEndIndex){\n    for(let i = newStartIndex;i <= newEndIndex;i++){\n      let childEl = createElm(newChildren[i]);\n      //可能是在后面追加也可能是在前面追加\n      //当新节点的头指针的下一个还有元素的时候表示在下一个元素的前面追加\n      //如果下一个元素没有就表示是在末尾追加\n      let anchor = newChildren[newEndIndex + 1] ? newChildren[newEndIndex + 1].el : null;\n      el.insertBefore(childEl,anchor);//当 anchor 为 null 的时候 insetBefore 就会使用 appendChild\n    }\n  }\n  //如果旧节点头指针小于尾指针，说明之间的节点都是需要删除的\n  if(oldStartIndex <= oldEndIndex){\n    for(let i = oldStartIndex;i <= oldEndIndex;i++){\n      //在乱序比对的时候，可能会被移走后设置为 undefined\n      if(oldChildren[i]){\n        let childEl = oldChildren[i].el;\n        el.removeChild(childEl);\n      }\n    }\n  }\n}","import Watcher from \"./observe/watcher\";\nimport { createElementVNode, createTextVNode } from \"./vdom\"\nimport { patch } from \"./vdom/patch\";\n\nexport function initLifeCycle(Vue){\n  /**将虚拟DOM转化成真实DOM */\n  Vue.prototype._update = function(vnode){\n    const vm = this;\n    const el = vm.$el;\n    \n    let preVnode = vm._vnode;//取出上次渲染的虚拟节点\n    vm._vnode = vnode;//保存当前渲染的虚拟节点\n    if(preVnode){\n      //如果有上次渲染的虚拟节点，就进行diff对比\n      vm.$el = patch(preVnode,vnode);\n    }else{\n      //如果上次没有没有渲染，表示第一次渲染，进行初始化，将vnode转成真实dom挂载到el上\n      //patch 既有初始化的功能，又有更新的方法\n      vm.$el = patch(el,vnode);\n    }\n  }\n  /**生成虚拟节点 */\n  Vue.prototype._c = function(){\n    return createElementVNode(this,...arguments);\n  }\n  /**生成文本虚拟节点 */\n  Vue.prototype._v = function(){\n    return createTextVNode(this,...arguments);\n  }\n  /**生成虚拟DOM */\n  Vue.prototype._s = function(value){\n    if(typeof value !== 'object') return value;\n    return JSON.stringify(value);\n  }\n  /**生成虚拟DOM */\n  Vue.prototype._render = function(){\n   const vm = this;\n   //当渲染的时候回去实例中取值，就可以将属性和视图绑定在一起了\n   return vm.$options.render.call(vm);//通过ast语法转义后生成的render方法\n  }\n}\n\n/**将组件挂载到DOM上 */\nexport function mountComponent(vm,el){\n  // 将节点挂载到实例上，方便之后访问\n  vm.$el = el;\n  // 1.调用render方法产生虚拟节点，虚拟DOM\n  const updateComponent = () => {\n    vm._update(vm._render());\n  }\n\n  new Watcher(vm,updateComponent,true);\n  \n\n  // 2.根据虚拟DOM产生真实DOM\n\n  // 3.插入到el元素中\n\n}\n\n/**\n * vue核心流程\n * 1.创造响应式数据\n * 2.模版转换成ast语法树\n * 3.将ast语法树转换成了render函数\n * 4.后续每次数据更新可以只执行render函数（无需再次执行ast转化的过程）\n */\n\n// render 函数会去产生虚拟节点（使用响应式数据）\n// 根据生成的虚拟节点创造正式的DOM\n\n// ---------------------------------------------------------------------\n\n/**调用选项中的生命钩子函数 */\nexport function callHook(vm,hook){\n  const handlers = vm.$options[hook];\n  if(handlers){\n    handlers.forEach(handler => handler.call(vm));\n  }\n}\n","// 重写数组中的部分方法\nlet oldArrayProto = Array.prototype;\n// 先复制一份原型\nexport let newArrayProto = Object.create(oldArrayProto);\n\n//列举出所有需要重新的方法\nlet methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'sort',\n  'reverse',\n  'splice'\n];\n\n// 开始重新方法\nmethods.forEach(item => {\n  //重写方法\n  newArrayProto[item] = function(...args){\n    // 内部还是调用原来的方法\n    const result = oldArrayProto[item].call(this,...args);\n    // 当新增数据时，还需要对新数据进行观察\n    let inserted;\n    let ob = this.__ob__;\n    switch(item){\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break;\n      case 'splice'://[1,2,3].splice(1,0,4,5);表示在2的位置插入 4，5\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if(inserted){\n      //对新增的数据进行观测\n      //这里唯一可以拿到的关联数据就是this，但是我们需要调用 Observer 中的 observeArray 来观察新数据\n      //而在创建 Observer 的时候又将 实例挂载到了 __ob__ 上，所以\n      ob.observeArray(inserted);\n    }\n\n    //数组变化了，通知对应的watcher实现更新\n    ob.dep.notify();\n    \n    return result;\n  }\n})","import { newArrayProto } from \"./array\";\nimport Dep from \"./dep\";\n\n/**通过 Object.defineProperty来劫持数据 */\nexport function observe(data){\n  //只能对对象进行劫持，所以要先进行判断\n  if(typeof data !== 'object' || data === null){\n    return;\n  }\n  //如果data 上有 __ob__ 并且是 Observer 时说明，这个对象已经被观测过了\n  if(data.__ob__ instanceof Observer){\n    return;\n  }\n\n  //如果一个对象已经被劫持过了，那就不用再被劫持\n  //（需要判断一个对象是否被劫持过，可以增添一个实例，用实例来判断是否被劫持过）\n  return new Observer(data);\n}\n\n/**观察者（被劫持对象） */\nclass Observer{\n  constructor(data){\n\n    //给每个对象都增加收集功能\n    this.dep = new Dep();\n\n    //Object.defineProperty只能劫持已经存在的属性（vue里面会为添加，删除属性的方法添加一些api，如$set,$delete）\n    \n    //将当前实例赋值给__ob__属性保存下来，方便在其他的地方调用实例的方法\n    //并且添加这个标识之后就可以知道这个数据已经被观察过了，不用在进行观察\n    // data.__ob__ = this;\n    //不过直接这样添加的话，在调用 this.walk(data) 的时候会形成死循环，可以这样解决\n    Object.defineProperty(data,\"__ob__\",{\n      value:this,\n      enumerable:false,//不可枚举，循环时就获取不了\n    })\n\n    if(Array.isArray(data)){\n      //当值为数组的也是可以对其进行劫持的，但是数组长度很长的时候就会非常消耗性能\n      //而且一般也不会通过索引来访问很设置值，所以vue中并不会劫持数组，而是重构数组的方法来实现响应式数据\n      data.__proto__ = newArrayProto;\n      //如果数组中的某个元素是对象的时候也是需要对其进行劫持的\n      this.observeArray(data);\n    }else{\n      this.walk(data);\n    }\n  }\n  walk(data){\n    //循环对象，对每个数据都进行劫持\n    //每次劫持都是一个重新定义属性的过程，所以会比较耗性能\n    Object.keys(data).forEach(key => {\n      defineReactive(data,key,data[key]);\n    })\n  }\n  observeArray(data){\n    data.forEach(item => observe(item));\n  }\n}\n\n/**重新定义属性 */\nexport function defineReactive(target,key,value){\n  //如果值是对象，那么还需要继续对数据进行劫持\n  let childOb = observe(value);//childOb.dep 用来收集依赖\n  //为每个属性创建一个dep,闭包中不会被销毁\n  let dep = new Dep();\n  //这里用到了 闭包 来保存 value 值。\n  Object.defineProperty(target,key,{\n    get(){\n      //取值时\n      if(Dep.target){//当进行普通的取值使用的时候不需要进行依赖收集\n        dep.depend();//让这个属性的收集器记住当前的watcher\n        if(childOb){\n          //让数组和对象本身也实现依赖收集\n          childOb.dep.depend();\n          //如果值是一个数组的话，还需要对里面的值进行依赖收集\n          //解决多维数组的问题\n          if(Array.isArray(value)){\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newVal){\n      //设置值时\n      if(newVal === value) return;\n      //如果设置的值是一个对象时，需要继续对这个对象进行劫持\n      observe(newVal);\n      value = newVal;\n      dep.notify();//设置值的时候通知watcher更新渲染\n    }\n  })\n}\n\n/**收集数组数据的依赖 */\nfunction dependArray(value){\n  for(let i = 0;i < value.length;i++){\n    let current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if(Array.isArray(current)){\n      dependArray(current);\n    }\n  }\n}","import { observe } from \"./observe\";\nimport Dep from \"./observe/dep\";\nimport Watcher, { nextTick } from \"./observe/watcher\";\n\n/**初始化状态 */\nexport function initState(vm){\n  const opts = vm.$options;//获取用户的选项\n  if(opts.data){\n    //初始化数据，生成相应式数据\n    initData(vm);\n  }\n  if(opts.computed){\n    //初始化计算属性\n    initComputed(vm);\n  }\n  if(opts.watch){\n    //初始化监控\n    initWatch(vm);\n  }\n}\n\n/**初始化数据，生成相应式数据 */\nfunction initData(vm){\n  let data = vm.$options.data;\n  //如果data 是函数还需要先执行才能回去到要劫持的数据\n  data = typeof data === 'function' ? data.call(vm) : data;\n  \n  //进行数据劫持，来创建响应式数据\n  observe(data);\n\n  //为了方便之后访问 data，给实例挂载一个 _data\n  vm._data = data;\n  //但是这样的话就需要使用 vm._data.xxx 来访问，这样不够优雅\n  //所以可以将 vm._data 用vm来代理就可以用 vm.xxx来访问 _data 中的属性了\n  for(let key in data){\n    proxy(vm,'_data',key);\n  }\n}\n\n/**代理 */\nfunction proxy(vm,target,key){\n  Object.defineProperty(vm,key,{\n    get(){\n      return vm[target][key]\n    },\n    set(newVal){\n      vm[target][key] = newVal\n    }\n  })\n}\n\n/**初始化计算属性 */\nfunction initComputed(vm){\n  const computed = vm.$options.computed;\n  //将计算属性的所有watcher都保存到vm上\n  const watchers = vm._computedWatchers = {};\n  for(let key in computed){\n    let userDef = computed[key];\n    //需要一个computed 的 watcher 来维护计算属性，方便实现之后的缓存\n    //需要监控计算属性中的get变化\n    let fn = typeof userDef == 'function' ? userDef : userDef.get;\n    //如果直接new Watcher默认就会执行fn,所以需要添加一个{lazy:true}来让他在使用的时候再至执行\n    //将计算属性和wathcer对应起来\n    watchers[key] = new Watcher(vm,fn,{lazy:true});\n\n    defineComputed(vm,key,userDef);\n  }\n}\n\n/**为实例挂载上计算属性 */\nfunction defineComputed(target,key,userDef){\n  //getter可能是一个 function 也可能是对象\n  const getter = typeof userDef == 'function' ? userDef : userDef.get;\n  const setter = userDef.set || (()=>{});\n  //当调用 render 渲染函数的时候，会访问计算属性\n  //计算属性函数调用的时候也会访问data的属性，从而获取到完整的值\n  //但是不能直接使用watcher，因为需要检查依赖的属性是否发生变化\n  Object.defineProperty(target,key,{\n    get:createComputedGetter(key),\n    set:setter,\n  })\n}\n\n//计算属性根本不会收集依赖，只会让自己的依赖属性去收集依赖\n/**创建计算属性getter */\nfunction createComputedGetter(key){\n  return function (){\n    //当前 this 是指向 vm 的\n    //所以 可以直接从this 上获取到全部的 计算属性watcher\n    const watcher = this._computedWatchers[key];\n    if(watcher.dirty){\n      // 执行用户传入的getter\n      watcher.evaluate();\n    }\n    /**\n     * 在计算属性依赖的属性发生变化的时候触发的是计算属性的watcher更新\n     * 并不会触发 渲染watcher的更新 ，所以页面并不会更新\n     * 所以计算属性依赖的属性也需要去收集 渲染watcher\n     */\n    //当第一次渲染的时候执行了 watcher 中 get 方法\n    //此时 渲染watcher 会被存放到wathcer缓存栈中\n    //在渲染的过程中发现使用到了计算属性，然后 计算属性watcher 被创建，并存放到 watcher 缓存栈中\n    //此时的watcher缓存栈就是 [渲染watcher，计算属性watcher]\n    //之后 计算属性watcher 调用evaluate()取值后出栈，watcher缓存栈就剩下 渲染watcher\n    //所以 watcher缓存栈 栈顶就是渲染watcher （Dep.target）\n    //所以可以让计算属性依赖的属性去收集上层的watcher（渲染watcher）\n    if(Dep.target){\n      watcher.depend();\n    }\n    return watcher.value;\n  }\n}\n\n/**初始化监控 */\nfunction initWatch(vm){\n  let watch = vm.$options.watch;\n  for(let key in watch){\n    const handler = watch[key];\n    //值有几种情况，字符串、数组、函数、对象\n    //现在只考虑前三种情况，而且不考虑深度监控的情况\n    if(Array.isArray(handler)){\n      for(let i = 0;i<handler.length;i++){\n        createWatcher(vm,key,handler[i]);\n      }\n    }else{\n      //字符串、函数\n      createWatcher(vm,key,handler);\n    }\n  }\n}\n\n/**创建 watch */\nfunction createWatcher(vm,key,handler){\n  //字符串时取\n  if(typeof handler === 'string'){\n    handler = vm.$options.methods[handler];\n  }\n  return vm.$watch(key,handler);\n}\n\n/**初始化nextTick $watch */\nexport function initStateMixin(Vue){\n  Vue.prototype.$nextTick = nextTick;\n  //最终调用的都是这个方法\n  Vue.prototype.$watch = function(exprOrFn,cb){\n    // 创建一个 Watcher\n    // 当监听的值发生变化的时候执行回调\n    // {user:true} 标志是用户自定定义的\n    new Watcher(this,exprOrFn,{user:true},cb);\n  }\n}","import { compileToFunction } from \"./compiler\";\nimport { callHook, mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\nimport { mergeOptions } from \"./utils\";\n\n/**\n * 初始化函数，就是为Vue添加_init方法\n * @param { Vue构造函数 } Vue \n */\nexport function initMixin(Vue){\n  Vue.prototype._init = function(options){\n    //将 options 挂载到 实例的 $options 上方便后续方法的访问\n    const vm = this;\n    //合并选项并赋值,定义的全局过滤器，指令等都会挂载上去\n    //在使用Vue创建组件的时候 this 指向Vue实例，\n    //在实例上没有constructor，但是会在原型链上查找\n    vm.$options = mergeOptions(this.constructor.options,options);\n    \n    // 调用生命周期函数\n    callHook(vm,\"beforeCreate\");\n    // 初始化状态，计算属性，watch\n    initState(vm);\n    // 调用生命周期函数\n    callHook(vm,\"beforeCreate\");\n\n    // 实现数据的挂载\n    if(options.el){\n      vm.$mount(options.el);\n    }\n  }\n  Vue.prototype.$mount = function(el){\n    const vm = this;\n    el = document.querySelector(el);\n    let opts = vm.$options;\n    //优先级 render > template > el\n    if(!opts.render){//查看是否有render函数\n      // 没有render函数，表示并不是用户自己写的渲染方法\n      // 如果没有template，有el就使用el作为模版，如果有template就使用template\n      let template;\n      if(!opts.template && el){\n        template = el.outerHTML;\n      }else{\n        template = opts.template;\n      }\n      if(template){//只要有模版就挂载\n        //这里需要对模版进行编译\n        const render = compileToFunction(template);\n        opts.render = render;// jsx 最终会被编译成 h('xxx')\n      }\n    }\n\n    //组件挂载\n    mountComponent(vm,el);\n\n    //最终就可以获取render方法\n\n    // script 标签引用的 vue.global.js 这个编译过程是在浏览器运行的\n    // runtime 是不包含模版编译的，整个编译时打包的时候通过loader来进行转义.vue文件的\n    // 所以用runtime的时候不能使用template\n  }\n}","import { initGlobalAPI } from \"./globalAPI\";\nimport { initMixin } from \"./init\";\nimport { initLifeCycle } from \"./lifecycle\";\nimport { initStateMixin } from \"./state\";\n\n// 不使用 class 来定义Vue 原因是，class会将所有的方法都封装到一起，导致耦合度过大，不便于管理和拆分\nfunction Vue(options){//options 就是用户的选项\n  this._init(options);\n}\n\n// 添加方法\ninitMixin(Vue);//扩展init方法\ninitLifeCycle(Vue); //vm._update,vm._render\ninitGlobalAPI(Vue);//全部 API\ninitStateMixin(Vue);//实现 nextTick $watch\n\nexport default Vue;"],"names":["mergeOptions","parent","child","options","key","mergeField","hasOwnProperty","strats","LIFECYCLE","forEach","hook","p","c","concat","components","parentVal","childVal","res","Object","create","console","log","initGlobalAPI","Vue","_base","mixin","extend","Sub","_init","prototype","constructor","component","id","definition","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","start","node","push","chars","text","replace","end","pop","length","advance","substring","parseStartTag","match","tagName","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","i","obj","split","item","JSON","stringify","slice","defaultTagRE","gen","codegen","test","token","lastIndex","exec","index","trim","join","genChildren","map","ast","code","compileToFunction","template","render","Function","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Watcher","vm","exprOrFn","cb","renderWatcher","getter","user","deps","depsId","Set","lazy","dirty","undefined","get","call","dep","has","add","addSub","depend","queueWatcher","oldVal","newVal","flushSchedulerQueue","flushQueue","queue","pending","q","run","nextTick","flushCallbacks","cbs","callbacks","waiting","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","isReservedTag","includes","createElementVNode","data","vnode","Ctor","$options","createComponentVnode","init","instance","componentInstance","componentOptions","$mount","createTextVNode","isSameVnode","vnode1","vnode2","createComponent","createElm","$el","el","createElement","patchProps","appendChild","oldProps","props","oldStyle","style","newStyle","removeAttribute","styleName","setAttribute","patch","oldVNode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibiling","removeChild","patchVnode","replaceChild","oldChildren","newChildren","updateChildren","mountChildren","innerHTML","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","childEl","anchor","initLifeCycle","_update","preVnode","_vnode","_c","arguments","_v","_s","_render","mountComponent","updateComponent","callHook","handlers","handler","oldArrayProto","Array","newArrayProto","methods","args","result","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","childOb","dependArray","set","current","initState","opts","initData","computed","initComputed","watch","initWatch","_data","proxy","watchers","_computedWatchers","userDef","fn","defineComputed","setter","createComputedGetter","evaluate","createWatcher","$watch","initStateMixin","$nextTick","initMixin","querySelector","outerHTML"],"mappings":";;;;;;EAAA;EACO,SAASA,YAAT,CAAsBC,MAAtB,EAA6BC,KAA7B,EAAmC;EACxC,EAAA,IAAMC,OAAO,GAAG,EAAhB,CADwC;EAExC;;EACA,EAAA,KAAI,IAAIC,GAAR,IAAeH,MAAf,EAAsB;MACpBI,UAAU,CAACD,GAAD,CAAV,CAAA;EACD,GALuC;;;EAOxC,EAAA,KAAI,IAAIA,IAAR,IAAeF,KAAf,EAAqB;EACnB,IAAA,IAAG,CAACD,MAAM,CAACK,cAAP,CAAsBF,IAAtB,CAAJ,EAA+B;QAC7BC,UAAU,CAACD,IAAD,CAAV,CAAA;EACD,KAAA;EACF,GAAA;;IACD,SAASC,UAAT,CAAoBD,GAApB,EAAwB;EACtB;EACA;EACA,IAAA,IAAGG,MAAM,CAACH,GAAD,CAAT,EAAe;EACbD,MAAAA,OAAO,CAACC,GAAD,CAAP,GAAeG,MAAM,CAACH,GAAD,CAAN,CAAYH,MAAM,CAACG,GAAD,CAAlB,EAAwBF,KAAK,CAACE,GAAD,CAA7B,CAAf,CAAA;EACD,KAFD,MAEK;EACH;EACAD,MAAAA,OAAO,CAACC,GAAD,CAAP,GAAeF,KAAK,CAACE,GAAD,CAAL,IAAcH,MAAM,CAACG,GAAD,CAAnC,CAAA;EACD,KAAA;EACF,GAAA;;EACD,EAAA,OAAOD,OAAP,CAAA;EACD;;EAGD,IAAMI,MAAM,GAAG,EAAf,CAAA;EACA,IAAMC,SAAS,GAAG,CAChB,cADgB,EAEhB,SAFgB,EAGhB,aAHgB,EAIhB,SAJgB,EAKhB,cALgB,EAMhB,SANgB,EAOhB,eAPgB,EAQhB,WARgB,CAAlB;;EAWAA,SAAS,CAACC,OAAV,CAAkB,UAAAC,IAAI,EAAI;IACxBH,MAAM,CAACG,IAAD,CAAN,GAAe,UAASC,CAAT,EAAWC,CAAX,EAAa;EAC1B;EACA;EACA,IAAA,IAAGA,CAAH,EAAK;EACH,MAAA,IAAGD,CAAH,EAAK;EACH;EACA,QAAA,OAAOA,CAAC,CAACE,MAAF,CAASD,CAAT,CAAP,CAAA;EACD,OAHD,MAGK;EACH;UACA,OAAO,CAACA,CAAD,CAAP,CAAA;EACD,OAAA;EACF,KARD,MAQK;EACH;EACA;EACA;EACA,MAAA,OAAOD,CAAP,CAAA;EACD,KAAA;KAhBH,CAAA;EAkBD,CAnBD;;EAsBAJ,MAAM,CAACO,UAAP,GAAoB,UAASC,SAAT,EAAmBC,QAAnB,EAA4B;EAC9C,EAAA,IAAIC,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAcJ,SAAd,CAAV,CAAA;;EACA,EAAA,IAAGC,QAAH,EAAY;EACV,IAAA,KAAI,IAAIZ,GAAR,IAAeY,QAAf,EAAwB;EACtB;EACA;EACAC,MAAAA,GAAG,CAACb,GAAD,CAAH,GAAWY,QAAQ,CAACZ,GAAD,CAAnB,CAAA;EACD,KAAA;EACF,GAAA;;IACDgB,OAAO,CAACC,GAAR,CAAYJ,GAAZ,CAAA,CAAA;EACA,EAAA,OAAOA,GAAP,CAAA;EACD,CAXD;;EC3DO,SAASK,aAAT,CAAuBC,GAAvB,EAA2B;EAChC;IACAA,GAAG,CAACpB,OAAJ,GAAc;MACZqB,KAAK,EAACD,GADM;;KAAd,CAAA;;EAGAA,EAAAA,GAAG,CAACE,KAAJ,GAAY,UAASA,KAAT,EAAe;EACzB;MACA,IAAKtB,CAAAA,OAAL,GAAeH,YAAY,CAAC,KAAKG,OAAN,EAAcsB,KAAd,CAA3B,CAAA;EACA,IAAA,OAAO,IAAP,CAAA;KAHF,CAAA;EAKA;;;EACAF,EAAAA,GAAG,CAACG,MAAJ,GAAa,UAASvB,OAAT,EAAiB;EAC5B;EACA;EACA,IAAA,SAASwB,GAAT,GAA0B;QAAA,IAAbxB,OAAa,uEAAH,EAAG,CAAA;;EACxB;QACA,IAAKyB,CAAAA,KAAL,CAAWzB,OAAX,CAAA,CAAA;EACD,KAN2B;;;MAQ5BwB,GAAG,CAACE,SAAJ,GAAgBX,MAAM,CAACC,MAAP,CAAcI,GAAG,CAACM,SAAlB,CAAhB,CAAA;EACAF,IAAAA,GAAG,CAACE,SAAJ,CAAcC,WAAd,GAA4BH,GAA5B,CAT4B;;MAW5BA,GAAG,CAACxB,OAAJ,GAAcH,YAAY,CAACuB,GAAG,CAACpB,OAAL,EAAaA,OAAb,CAA1B,CAAA;EAEA,IAAA,OAAOwB,GAAP,CAAA;EACD,GAdD,CAXgC;;;EA2BhCJ,EAAAA,GAAG,CAACpB,OAAJ,CAAYW,UAAZ,GAAyB,EAAzB,CAAA;EACA;;EACAS,EAAAA,GAAG,CAACQ,SAAJ,GAAgB,UAASC,EAAT,EAAYC,UAAZ,EAAuB;EACrC;EACAA,IAAAA,UAAU,GAAG,OAAOA,UAAP,KAAsB,UAAtB,GAAmCA,UAAnC,GAAgDV,GAAG,CAACG,MAAJ,CAAWO,UAAX,CAA7D,CAAA;EACAV,IAAAA,GAAG,CAACpB,OAAJ,CAAYW,UAAZ,CAAuBkB,EAAvB,IAA6BC,UAA7B,CAAA;KAHF,CAAA;EAKD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECpCD;EACA;EACA;EACA;EAEA;EACA,IAAMC,MAAM,GAAZ,8BAAA;EACA;;EACA,IAAMC,YAAY,GAAUD,MAAAA,CAAAA,MAAAA,CAAAA,MAAV,kBAAwBA,MAAxB,EAAA,GAAA,CAAlB;EACA;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,CAAA,CAArB;EACA;;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,EAAA,QAAA,CAAA,CAAf;EACA;;EACA,IAAMI,SAAS,GAAG,2EAAlB;;EAEA,IAAMC,aAAa,GAAG,YAAtB;EAGA;;EACO,SAASC,SAAT,CAAmBC,IAAnB,EAAwB;IAC7B,IAAMC,YAAY,GAAG,CAArB,CAAA;IACA,IAAMC,SAAS,GAAG,CAAlB,CAAA;EACA,EAAA,IAAMC,KAAK,GAAG,EAAd,CAH6B;;IAI7B,IAAIC,aAAJ,CAJ6B;;IAK7B,IAAIC,IAAJ,CAL6B;EAM7B;EACA;;EACA,EAAA,SAASC,gBAAT,CAA0BC,GAA1B,EAA8BC,KAA9B,EAAoC;MAClC,OAAO;EACLD,MAAAA,GAAG,EAAHA,GADK;EAELC,MAAAA,KAAK,EAALA,KAFK;EAGLC,MAAAA,IAAI,EAACR,YAHA;EAILS,MAAAA,QAAQ,EAAC,EAJJ;EAKLnD,MAAAA,MAAM,EAAC,IAAA;OALT,CAAA;EAOD,GAhB4B;;;EAkB7B,EAAA,SAASoD,KAAT,CAAeJ,GAAf,EAAmBC,KAAnB,EAAyB;EACvB,IAAA,IAAII,IAAI,GAAGN,gBAAgB,CAACC,GAAD,EAAKC,KAAL,CAA3B,CAAA;;MACA,IAAG,CAACH,IAAJ,EAAS;EAAC;EACRA,MAAAA,IAAI,GAAGO,IAAP,CAAA;EACD,KAAA;;EACD,IAAA,IAAGR,aAAH,EAAiB;QACfQ,IAAI,CAACrD,MAAL,GAAc6C,aAAd,CAAA;EACAA,MAAAA,aAAa,CAACM,QAAd,CAAuBG,IAAvB,CAA4BD,IAA5B,CAAA,CAAA;EACD,KAAA;;MACDT,KAAK,CAACU,IAAN,CAAWD,IAAX,CAAA,CAAA;EACAR,IAAAA,aAAa,GAAGQ,IAAhB,CAAA;EACD,GA7B4B;;;IA+B7B,SAASE,KAAT,CAAeC,IAAf,EAAoB;MAClBA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAmB,EAAnB,CAAP,CADkB;;EAGlBD,IAAAA,IAAI,IAAIX,aAAa,CAACM,QAAd,CAAuBG,IAAvB,CAA4B;EAClCJ,MAAAA,IAAI,EAACP,SAD6B;EAElCa,MAAAA,IAAI,EAAJA,IAFkC;EAGlCxD,MAAAA,MAAM,EAAC6C,aAAAA;EAH2B,KAA5B,CAAR,CAAA;EAKD,GAvC4B;;;IAyC7B,SAASa,GAAT,CAAaV,GAAb,EAAiB;MACfJ,KAAK,CAACe,GAAN,EAAA,CADe;;MAEfd,aAAa,GAAGD,KAAK,CAACA,KAAK,CAACgB,MAAN,GAAe,CAAhB,CAArB,CAFe;EAGhB,GA5C4B;EA+C7B;;;IACA,SAASC,OAAT,CAAiBD,MAAjB,EAAwB;EACtBnB,IAAAA,IAAI,GAAGA,IAAI,CAACqB,SAAL,CAAeF,MAAf,CAAP,CAAA;EACD,GAlD4B;;;EAoD7B,EAAA,SAASG,aAAT,GAAwB;EACtB,IAAA,IAAMX,KAAK,GAAGX,IAAI,CAACuB,KAAL,CAAW7B,YAAX,CAAd,CAAA;;EACA,IAAA,IAAGiB,KAAH,EAAS;EACP;EACA,MAAA,IAAMY,KAAK,GAAG;EACZC,QAAAA,OAAO,EAACb,KAAK,CAAC,CAAD,CADD;EACK;EACjBH,QAAAA,KAAK,EAAC,EAAA;EAFM,OAAd,CAFO;;QAOPY,OAAO,CAACT,KAAK,CAAC,CAAD,CAAL,CAASQ,MAAV,CAAP,CAPO;;QAUP,IAAIM,IAAJ,EAASR,IAAT,CAAA;;EACA,MAAA,OAAM,EAAEA,IAAG,GAAGjB,IAAI,CAACuB,KAAL,CAAWzB,aAAX,CAAR,MAAuC2B,IAAI,GAAGzB,IAAI,CAACuB,KAAL,CAAW1B,SAAX,CAA9C,CAAN,EAA2E;EACzE;UACAuB,OAAO,CAACK,IAAI,CAAC,CAAD,CAAJ,CAAQN,MAAT,CAAP,CAFyE;;EAIzEI,QAAAA,KAAK,CAACf,KAAN,CAAYK,IAAZ,CAAiB;EAACa,UAAAA,IAAI,EAACD,IAAI,CAAC,CAAD,CAAV;EAAcE,UAAAA,KAAK,EAACF,IAAI,CAAC,CAAD,CAAJ,IAASA,IAAI,CAAC,CAAD,CAAb,IAAkBA,IAAI,CAAC,CAAD,CAAtB,IAA2B,IAAA;WAAhE,CAAA,CAAA;EACD,OAhBM;;;EAkBP,MAAA,IAAGR,IAAH,EAAO;EACLG,QAAAA,OAAO,CAACH,IAAG,CAAC,CAAD,CAAH,CAAOE,MAAR,CAAP,CAAA;EACD,OAAA;;EACD,MAAA,OAAOI,KAAP,CAAA;EACD,KAxBqB;;;EA0BtB,IAAA,OAAO,KAAP,CAAA;EACD,GA/E4B;;;EAiF7B,EAAA,OAAMvB,IAAN,EAAW;MACT,IAAI4B,OAAO,GAAG5B,IAAI,CAAC6B,OAAL,CAAa,GAAb,CAAd,CADS;EAGT;EACA;EACA;EACA;;MACA,IAAGD,OAAO,KAAK,CAAf,EAAiB;EACf;QACA,IAAME,aAAa,GAAGR,aAAa,EAAnC,CAAA;;EACA,MAAA,IAAGQ,aAAH,EAAiB;EACf;UACAnB,KAAK,CAACmB,aAAa,CAACN,OAAf,EAAuBM,aAAa,CAACtB,KAArC,CAAL,CAAA;EACA,QAAA,SAAA;EACD,OAPc;;;EAUf,MAAA,IAAMuB,WAAW,GAAG/B,IAAI,CAACuB,KAAL,CAAW3B,MAAX,CAApB,CAAA;;EACA,MAAA,IAAGmC,WAAH,EAAe;EACb;EACAd,QAAAA,GAAG,CAACc,WAAW,CAAC,CAAD,CAAZ,CAAH,CAAA;EACAX,QAAAA,OAAO,CAACW,WAAW,CAAC,CAAD,CAAX,CAAeZ,MAAhB,CAAP,CAAA;EACA,QAAA,SAAA;EACD,OAAA;EACF,KAxBQ;;;MA0BT,IAAGS,OAAO,GAAG,CAAb,EAAe;EACb;QACA,IAAIb,IAAI,GAAGf,IAAI,CAACqB,SAAL,CAAe,CAAf,EAAiBO,OAAjB,CAAX,CAAA;;EACA,MAAA,IAAGb,IAAH,EAAQ;EACN;UACAD,KAAK,CAACC,IAAD,CAAL,CAAA;EACAK,QAAAA,OAAO,CAACL,IAAI,CAACI,MAAN,CAAP,CAAA;EACD,OAAA;EACF,KAAA;EACF,GAAA;;EACD,EAAA,OAAOd,IAAP,CAAA;EACD;;ECxID;;EACA,SAAS2B,QAAT,CAAkBxB,KAAlB,EAAwB;IACtB,IAAIyB,GAAG,GAAG,EAAV,CAAA;;EACA,EAAA,KAAI,IAAIC,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAG1B,KAAK,CAACW,MAAxB,EAA+Be,CAAC,EAAhC,EAAmC;EACjC,IAAA,IAAIT,IAAI,GAAGjB,KAAK,CAAC0B,CAAD,CAAhB,CAAA;;EACA,IAAA,IAAGT,IAAI,CAACC,IAAL,IAAa,OAAhB,EAAwB;EAAA,MAAA,CAAA,YAAA;EACtB;UACA,IAAIS,GAAG,GAAG,EAAV,CAAA;UACAV,IAAI,CAACE,KAAL,CAAWS,KAAX,CAAiB,GAAjB,CAAA,CAAsBrE,OAAtB,CAA8B,UAAAsE,IAAI,EAAE;EAClC,UAAA,IAAA,WAAA,GAAkBA,IAAI,CAACD,KAAL,CAAW,GAAX,CAAlB;EAAA,cAAA,YAAA,GAAA,cAAA,CAAA,WAAA,EAAA,CAAA,CAAA;EAAA,cAAK1E,GAAL,GAAA,YAAA,CAAA,CAAA,CAAA;EAAA,cAASiE,KAAT,GAAA,YAAA,CAAA,CAAA,CAAA,CAAA;;EACAQ,UAAAA,GAAG,CAACzE,GAAD,CAAH,GAAWiE,KAAX,CAAA;WAFF,CAAA,CAAA;UAIAF,IAAI,CAACE,KAAL,GAAaQ,GAAb,CAAA;EAPsB,OAAA,GAAA,CAAA;EAQvB,KAAA;;EACDF,IAAAA,GAAG,IAAOR,EAAAA,CAAAA,MAAAA,CAAAA,IAAI,CAACC,IAAZ,EAAoBY,GAAAA,CAAAA,CAAAA,MAAAA,CAAAA,IAAI,CAACC,SAAL,CAAed,IAAI,CAACE,KAApB,CAApB,EAAH,GAAA,CAAA,CAAA;EACD,GAAA;;IACD,OAAWM,GAAAA,CAAAA,MAAAA,CAAAA,GAAG,CAACO,KAAJ,CAAU,CAAV,EAAY,CAAC,CAAb,CAAX,EAAA,GAAA,CAAA,CAfsB;EAgBvB;;;EAGD,IAAMC,YAAY,GAAG,0BAArB;;EACA;;EACA,SAASC,GAAT,CAAa9B,IAAb,EAAkB;EAChB,EAAA,IAAGA,IAAI,CAACH,IAAL,KAAc,CAAjB,EAAmB;EACjB;MACA,OAAOkC,OAAO,CAAC/B,IAAD,CAAd,CAAA;EACD,GAHD,MAGK;EACH;EACA,IAAA,IAAIG,IAAI,GAAGH,IAAI,CAACG,IAAhB,CAAA;;EACA,IAAA,IAAG0B,YAAY,CAACG,IAAb,CAAkB7B,IAAlB,CAAH,EAA2B;EACzB;EACA,MAAA,IAAI8B,KAAK,GAAG,EAAZ,CAFyB;;QAIzB,IAAItB,KAAJ,CAJyB;EAMzB;EACA;EACA;EACA;;QACAkB,YAAY,CAACK,SAAb,GAAyB,CAAzB,CAAA;EACA,MAAA,IAAIA,SAAS,GAAG,CAAhB,CAXyB;;QAYzB,OAAMvB,KAAK,GAAGkB,YAAY,CAACM,IAAb,CAAkBhC,IAAlB,CAAd,EAAsC;EACpC,QAAA,IAAIiC,KAAK,GAAGzB,KAAK,CAACyB,KAAlB,CADoC;;UAEpC,IAAGA,KAAK,GAAGF,SAAX,EAAqB;EACnB;EACAD,UAAAA,KAAK,CAAChC,IAAN,CAAWyB,IAAI,CAACC,SAAL,CAAexB,IAAI,CAACyB,KAAL,CAAWM,SAAX,EAAqBE,KAArB,CAAf,CAAX,CAAA,CAAA;EACD,SAAA;;UACDH,KAAK,CAAChC,IAAN,CAAiBU,KAAAA,CAAAA,MAAAA,CAAAA,KAAK,CAAC,CAAD,CAAL,CAAS0B,IAAT,EAAjB,EAAA,GAAA,CAAA,CAAA,CAAA;UACAH,SAAS,GAAGE,KAAK,GAAGzB,KAAK,CAAC,CAAD,CAAL,CAASJ,MAA7B,CAAA;EACD,OAAA;;EACD,MAAA,IAAG2B,SAAS,GAAG/B,IAAI,CAACI,MAApB,EAA2B;EACzB0B,QAAAA,KAAK,CAAChC,IAAN,CAAWyB,IAAI,CAACC,SAAL,CAAexB,IAAI,CAACyB,KAAL,CAAWM,SAAX,CAAf,CAAX,CAAA,CAAA;EACD,OAAA;;EACD,MAAA,OAAA,KAAA,CAAA,MAAA,CAAaD,KAAK,CAACK,IAAN,CAAW,GAAX,CAAb,EAAA,GAAA,CAAA,CAAA;EACD,KAzBD,MAyBK;EACH;EACA,MAAA,OAAA,MAAA,CAAA,MAAA,CAAcnC,IAAd,EAAA,IAAA,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;EACD;;;EACA,SAASoC,WAAT,CAAqBzC,QAArB,EAA8B;EAC5B,EAAA,OAAOA,QAAQ,CAAC0C,GAAT,CAAa,UAAA5F,KAAK,EAAA;MAAA,OAAIkF,GAAG,CAAClF,KAAD,CAAP,CAAA;EAAA,GAAlB,CAAkC0F,CAAAA,IAAlC,CAAuC,GAAvC,CAAP,CAAA;EACD,CAAA;EAED;;;EACA,SAASP,OAAT,CAAiBU,GAAjB,EAAqB;EACnB,EAAA,IAAI3C,QAAQ,GAAGyC,WAAW,CAACE,GAAG,CAAC3C,QAAL,CAA1B,CAAA;EACA,EAAA,IAAI4C,IAAI,GAAA,cAAA,CAAA,MAAA,CAEDD,GAAG,CAAC9C,GAFH,EAGF8C,YAAAA,CAAAA,CAAAA,MAAAA,CAAAA,GAAG,CAAC7C,KAAJ,CAAUW,MAAV,GAAmB,CAAnB,GAAuBa,QAAQ,CAACqB,GAAG,CAAC7C,KAAL,CAA/B,GAA4C,MAH1C,qBAIF6C,GAAG,CAAC3C,QAAJ,CAAaS,MAAb,GAAA,GAAA,CAAA,MAAA,CAA0BT,QAA1B,CAAA,GAAqC,EAJnC,EAAR,SAAA,CAAA,CAAA;EAOA,EAAA,OAAO4C,IAAP,CAAA;EACD,CAAA;EAED;;;EACO,SAASC,iBAAT,CAA2BC,QAA3B,EAAoC;EACzC;EACA,EAAA,IAAIH,GAAG,GAAGtD,SAAS,CAACyD,QAAD,CAAnB,CAFyC;EAIzC;;IACA,IAAIF,IAAI,+BAAwBX,OAAO,CAACU,GAAD,CAA/B,EAAA,IAAA,CAAR,CALyC;;EAOzC,EAAA,IAAII,MAAM,GAAG,IAAIC,QAAJ,CAAaJ,IAAb,CAAb,CAAA;EACA,EAAA,OAAOG,MAAP,CAAA;EACD;;EC1FD,IAAInE,IAAE,GAAG,CAAT,CAAA;;MACMqE;IACJ,SAAa,GAAA,GAAA;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,GAAA,CAAA,CAAA;;EACX,IAAA,IAAA,CAAKrE,EAAL,GAAUA,IAAE,EAAZ,CADW;EAGX;;MACA,IAAKsE,CAAAA,IAAL,GAAY,EAAZ,CAAA;EACD,GAAA;;;;aACD,SAAQ,MAAA,GAAA;EACND,MAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB,EADM;EAEP,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,MAAA,CAAOC,OAAP,EAAe;EACb,MAAA,IAAA,CAAKH,IAAL,CAAU/C,IAAV,CAAekD,OAAf,CAAA,CAAA;EACD,KAAA;EACD;;;;aACA,SAAQ,MAAA,GAAA;EACN,MAAA,IAAA,CAAKH,IAAL,CAAU7F,OAAV,CAAkB,UAAAgG,OAAO,EAAA;UAAA,OAAIA,OAAO,CAACC,MAAR,EAAJ,CAAA;SAAzB,CAAA,CAAA;EACD,KAAA;;;;EAGH,CAAA,EAAA,CAAA;EACA;EACA;;;EACAL,GAAG,CAACE,MAAJ,GAAa,IAAb,CAAA;EAEA;;EACA,IAAI1D,KAAK,GAAG,EAAZ,CAAA;EACO,SAAS8D,UAAT,CAAoBF,OAApB,EAA4B;IACjC5D,KAAK,CAACU,IAAN,CAAWkD,OAAX,CAAA,CAAA;IACAJ,GAAG,CAACE,MAAJ,GAAaE,OAAb,CAAA;EACD,CAAA;EACM,SAASG,SAAT,CAAmBH,OAAnB,EAA2B;EAChC5D,EAAAA,KAAK,CAACe,GAAN,EAAA,CAAA;IACAyC,GAAG,CAACE,MAAJ,GAAa1D,KAAK,CAACA,KAAK,CAACgB,MAAN,GAAe,CAAhB,CAAlB,CAAA;EACD;;EC3BD,IAAI7B,EAAE,GAAG,CAAT;EAGA;EAEA;EACA;EACA;EACA;EAEA;EACA;;MACM6E;EACJ;EACF;EACA;EACA;EACA;EACE,EAAA,SAAA,OAAA,CAAYC,EAAZ,EAAeC,QAAf,EAAwB5G,OAAxB,EAAgC6G,EAAhC,EAAmC;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,CAAA,CAAA;;EACjC;EACA,IAAA,IAAA,CAAKhF,EAAL,GAAUA,EAAE,EAAZ,CAFiC;;MAIjC,IAAKiF,CAAAA,aAAL,GAAqB9G,OAArB,CAAA;EAEA;;EACA,IAAA,IAAA,CAAK6G,EAAL,GAAUA,EAAV,CAPiC;;EASjC,IAAA,IAAG,OAAOD,QAAP,KAAoB,QAAvB,EAAgC;QAC9B,IAAKG,CAAAA,MAAL,GAAc,YAAU;UACtB,OAAOJ,EAAE,CAACC,QAAD,CAAT,CAAA;SADF,CAAA;EAGD,KAJD,MAIK;EACH;QACA,IAAKG,CAAAA,MAAL,GAAcH,QAAd,CAAA;EACD,KAhBgC;;;EAkBjC,IAAA,IAAA,CAAKI,IAAL,GAAYhH,OAAO,CAACgH,IAApB,CAAA;EACA;;EAEA;EACA;EACA;EACA;;MACA,IAAKC,CAAAA,IAAL,GAAY,EAAZ,CAAA;EACA,IAAA,IAAA,CAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd,CA1BiC;;EA6BjC,IAAA,IAAA,CAAKC,IAAL,GAAYpH,OAAO,CAACoH,IAApB,CA7BiC;;MA+BjC,IAAKC,CAAAA,KAAL,GAAa,IAAA,CAAKD,IAAlB,CAAA;EACA;;EAEA,IAAA,IAAA,CAAKT,EAAL,GAAUA,EAAV,CAlCiC;EAqCjC;EACA;;MACA,IAAKzC,CAAAA,KAAL,GAAa,IAAKkD,CAAAA,IAAL,GAAYE,SAAZ,GAAuB,IAAKC,CAAAA,GAAL,EAApC,CAAA;EACD;;;;;aAED,SAAU,QAAA,GAAA;EACR;EACA,MAAA,IAAA,CAAKrD,KAAL,GAAa,IAAA,CAAKqD,GAAL,EAAb,CAFQ;;QAIR,IAAKF,CAAAA,KAAL,GAAa,KAAb,CAAA;EACD,KAAA;;;aACD,SAAK,GAAA,GAAA;EACHb,MAAAA,UAAU,CAAC,IAAD,CAAV,CADG;;QAEH,IAAItC,KAAK,GAAG,IAAA,CAAK6C,MAAL,CAAYS,IAAZ,CAAiB,IAAKb,CAAAA,EAAtB,CAAZ,CAFG;;EAGHF,MAAAA,SAAS,GAHN;;EAIH,MAAA,OAAOvC,KAAP,CAAA;EACD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,MAAA,CAAOuD,GAAP,EAAW;EACT;EACA,MAAA,IAAI5F,EAAE,GAAG4F,GAAG,CAAC5F,EAAb,CAAA;;QACA,IAAG,CAAC,KAAKqF,MAAL,CAAYQ,GAAZ,CAAgB7F,EAAhB,CAAJ,EAAwB;EACtB,QAAA,IAAA,CAAKoF,IAAL,CAAU7D,IAAV,CAAeqE,GAAf,EADsB;;EAEtB,QAAA,IAAA,CAAKP,MAAL,CAAYS,GAAZ,CAAgB9F,EAAhB,CAAA,CAAA;EACA4F,QAAAA,GAAG,CAACG,MAAJ,CAAW,IAAX,EAHsB;EAIvB,OAAA;EACF,KAAA;EACD;;;;aACA,SAAQ,MAAA,GAAA;EACN,MAAA,IAAInD,CAAC,GAAG,IAAKwC,CAAAA,IAAL,CAAUvD,MAAlB,CAAA;;QACA,OAAMe,CAAC,EAAP,EAAU;EACR;EACA,QAAA,IAAA,CAAKwC,IAAL,CAAUxC,CAAV,CAAA,CAAaoD,MAAb,EAAA,CAAA;EACD,OAAA;EACF,KAAA;EACD;;;;aACA,SAAQ,MAAA,GAAA;QACN,IAAG,IAAA,CAAKT,IAAR,EAAa;EACX;UACA,IAAKC,CAAAA,KAAL,GAAa,IAAb,CAAA;EACD,OAHD,MAGK;EACH;EACA;UACAS,YAAY,CAAC,IAAD,CAAZ,CAAA;EACD,OAAA;EACF,KAAA;;;aACD,SAAK,GAAA,GAAA;EACH;EACA,MAAA,IAAIC,MAAM,GAAG,IAAK7D,CAAAA,KAAlB,CAFG;;EAIH,MAAA,IAAI8D,MAAM,GAAG,IAAKT,CAAAA,GAAL,EAAb,CAAA;;QACA,IAAG,IAAA,CAAKP,IAAR,EAAa;EACX;UACA,IAAKH,CAAAA,EAAL,CAAQW,IAAR,CAAa,KAAKb,EAAlB,EAAqBqB,MAArB,EAA4BD,MAA5B,CAAA,CAAA;EACD,OAAA;EACF,KAAA;;;;;EAGH;;;EACA,SAASE,mBAAT,GAA8B;EAC5B;EACA,EAAA,IAAIC,UAAU,GAAGC,KAAK,CAACpD,KAAN,CAAY,CAAZ,CAAjB,CAAA;EACAoD,EAAAA,KAAK,GAAG,EAAR,CAAA;EACAT,EAAAA,GAAG,GAAG,EAAN,CAAA;EACAU,EAAAA,OAAO,GAAG,KAAV,CAAA;EACAF,EAAAA,UAAU,CAAC5H,OAAX,CAAmB,UAAA+H,CAAC,EAAA;MAAA,OAAIA,CAAC,CAACC,GAAF,EAAJ,CAAA;KAApB,CAAA,CAAA;EACD,CAAA;;EAED,IAAIH,KAAK,GAAG,EAAZ,CAAA;EACA,IAAIT,GAAG,GAAG,EAAV,CAAA;EACA,IAAIU,OAAO,GAAG,KAAd;;EACA;;EACA,SAASN,YAAT,CAAsBxB,OAAtB,EAA8B;EAC5B,EAAA,IAAIzE,EAAE,GAAGyE,OAAO,CAACzE,EAAjB,CAAA;;EACA,EAAA,IAAG,CAAC6F,GAAG,CAAC7F,EAAD,CAAP,EAAY;MACVsG,KAAK,CAAC/E,IAAN,CAAWkD,OAAX,CAAA,CAAA;EACAoB,IAAAA,GAAG,CAAC7F,EAAD,CAAH,GAAU,IAAV,CAAA;;MAEA,IAAG,CAACuG,OAAJ,EAAY;EACVG,MAAAA,QAAQ,CAACN,mBAAD,CAAR,CAAA;EACAG,MAAAA,OAAO,GAAG,IAAV,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;EAGD;;;EACA,SAASI,cAAT,GAAyB;EACvB,EAAA,IAAIC,GAAG,GAAGC,SAAS,CAAC3D,KAAV,CAAgB,CAAhB,CAAV,CAAA;EACA2D,EAAAA,SAAS,GAAG,EAAZ,CAAA;EACAC,EAAAA,OAAO,GAAG,KAAV,CAAA;EACAF,EAAAA,GAAG,CAACnI,OAAJ,CAAY,UAAAuG,EAAE,EAAA;EAAA,IAAA,OAAIA,EAAE,EAAN,CAAA;KAAd,CAAA,CAAA;EACD,CAAA;;EAED,IAAI6B,SAAS,GAAG,EAAhB,CAAA;EACA,IAAIC,OAAO,GAAG,KAAd,CAAA;EACA;EACA;EACA;EACA;;EACO,SAASJ,QAAT,CAAkB1B,EAAlB,EAAqB;IAC1B6B,SAAS,CAACtF,IAAV,CAAeyD,EAAf,CAAA,CAAA;;IACA,IAAG,CAAC8B,OAAJ,EAAY;EACV;EACA;EACA;EACA;EACA;EACA;EACA;EACA;MACAC,SAAS,EAAA,CAAA;EACTD,IAAAA,OAAO,GAAG,IAAV,CAAA;EACD,GAAA;EACF,CAAA;EAED;;EACA,IAAIC,SAAJ,CAAA;;EACA,IAAGC,OAAH,EAAW;EACTD,EAAAA,SAAS,GAAG,SAAM,SAAA,GAAA;EAChBC,IAAAA,OAAO,CAACC,OAAR,EAAkBC,CAAAA,IAAlB,CAAuBP,cAAvB,CAAA,CAAA;KADF,CAAA;EAGD,CAJD,MAIM,IAAGQ,gBAAH,EAAoB;EACxB,EAAA,IAAIC,QAAQ,GAAGD,gBAAgB,CAACR,cAAD,CAA/B,CAAA;EACA,EAAA,IAAIU,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,CAAxB,CAAf,CAAA;EACAH,EAAAA,QAAQ,CAACI,OAAT,CAAiBH,QAAjB,EAA0B;EACxBI,IAAAA,aAAa,EAAC,IAAA;KADhB,CAAA,CAAA;;EAGAV,EAAAA,SAAS,GAAG,SAAM,SAAA,GAAA;MAChBM,QAAQ,CAACK,WAAT,GAAuB,CAAvB,CAAA;KADF,CAAA;EAGD,CATK,MASA,IAAGC,YAAH,EAAgB;EACpBZ,EAAAA,SAAS,GAAG,SAAM,SAAA,GAAA;MAChBY,YAAY,CAAChB,cAAD,CAAZ,CAAA;KADF,CAAA;EAGD,CAJK,MAIA,IAAGgB,YAAH,EAAgB;EACpBZ,EAAAA,SAAS,GAAG,SAAM,SAAA,GAAA;EAChBa,IAAAA,UAAU,CAACjB,cAAD,EAAgB,CAAhB,CAAV,CAAA;KADF,CAAA;EAGD;;ECvMD;EACA,SAASkB,aAAT,CAAuB5G,GAAvB,EAA2B;EACzB,EAAA,OAAO,CAAC,GAAD,EAAK,KAAL,EAAW,MAAX,EAAkB,IAAlB,EAAuB,IAAvB,EAA4B,IAA5B,EAAiC,QAAjC,EAA2C6G,QAA3C,CAAoD7G,GAApD,CAAP,CAAA;EACD,CAAA;EAED;;;EACO,SAAS8G,kBAAT,CAA4BjD,EAA5B,EAA+B7D,GAA/B,EAAmC+G,IAAnC,EAAoD;EACzD,EAAA,IAAGA,IAAI,IAAI,IAAX,EAAiBA,IAAI,GAAG,EAAP,CAAA;EACjB,EAAA,IAAI5J,GAAG,GAAG4J,IAAI,CAAC5J,GAAf,CAAA;;EACA,EAAA,IAAGA,GAAH,EAAO;MACL,OAAO4J,IAAI,CAAC5J,GAAZ,CAAA;EACD,GAAA;;EALwD,EAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAATgD,QAAS,GAAA,IAAA,KAAA,CAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;MAATA,QAAS,CAAA,IAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,GAAA;;EAOzD,EAAA,IAAGyG,aAAa,CAAC5G,GAAD,CAAhB,EAAsB;EACpB;MACA,OAAOgH,KAAK,CAACnD,EAAD,EAAI7D,GAAJ,EAAQ7C,GAAR,EAAY4J,IAAZ,EAAiB5G,QAAjB,CAAZ,CAAA;EACD,GAHD,MAGK;EACH;MACA,IAAK8G,IAAI,GAAGpD,EAAE,CAACqD,QAAH,CAAYrJ,UAAZ,CAAuBmC,GAAvB,CAAZ,CAFG;EAIH;;EACA,IAAA,OAAOmH,oBAAoB,CAACtD,EAAD,EAAI7D,GAAJ,EAAQ7C,GAAR,EAAY4J,IAAZ,EAAiB5G,QAAjB,EAA0B8G,IAA1B,CAA3B,CAAA;EACD,GAAA;EACF,CAAA;EAED;;EACA,SAASE,oBAAT,CAA8BtD,EAA9B,EAAiC7D,GAAjC,EAAqC7C,GAArC,EAAyC4J,IAAzC,EAA8C5G,QAA9C,EAAuD8G,IAAvD,EAA4D;EAC1D,EAAA,IAAG,OAAOA,CAAAA,IAAP,CAAgB,KAAA,QAAnB,EAA4B;EAC1B;MACAA,IAAI,GAAGpD,EAAE,CAACqD,QAAH,CAAY3I,KAAZ,CAAkBE,MAAlB,CAAyBwI,IAAzB,CAAP,CAAA;EACD,GAAA;;IACDF,IAAI,CAACtJ,IAAL,GAAY;MACV2J,IADU,EAAA,SAAA,IAAA,CACLJ,KADK,EACC;EACT;EACA;EACA,MAAA,IAAIK,QAAQ,GAAGL,KAAK,CAACM,iBAAN,GAA0B,IAAIN,KAAK,CAACO,gBAAN,CAAuBN,IAA3B,EAAzC,CAAA;EACAI,MAAAA,QAAQ,CAACG,MAAT,EAAA,CAAA;EACD,KAAA;KANH,CAAA;EAQA,EAAA,OAAOR,KAAK,CAACnD,EAAD,EAAI7D,GAAJ,EAAQ7C,GAAR,EAAY4J,IAAZ,EAAiB5G,QAAjB,EAA0B,IAA1B,EAA+B;EAAC8G,IAAAA,IAAI,EAAJA,IAAAA;EAAD,GAA/B,CAAZ,CAAA;EACD,CAAA;EAED;;;EACO,SAASQ,eAAT,CAAyB5D,EAAzB,EAA4BrD,IAA5B,EAAiC;EACtC,EAAA,OAAOwG,KAAK,CAACnD,EAAD,EAAIW,SAAJ,EAAcA,SAAd,EAAwBA,SAAxB,EAAkCA,SAAlC,EAA4ChE,IAA5C,CAAZ,CAAA;EACD,CAAA;EAED;EACA;EACA;EACA;EACA;;EACA,SAASwG,KAAT,CAAenD,EAAf,EAAkB7D,GAAlB,EAAsB7C,GAAtB,EAA0B4J,IAA1B,EAA+B5G,QAA/B,EAAwCK,IAAxC,EAA6C+G,gBAA7C,EAA8D;IAC5D,OAAO;EACL1D,IAAAA,EAAE,EAAFA,EADK;EAEL7D,IAAAA,GAAG,EAAHA,GAFK;EAGL7C,IAAAA,GAAG,EAAHA,GAHK;EAIL4J,IAAAA,IAAI,EAAJA,IAJK;EAKL5G,IAAAA,QAAQ,EAARA,QALK;EAMLK,IAAAA,IAAI,EAAJA,IANK;MAOL+G,gBAAgB,EAAhBA,gBAPK;;KAAP,CAAA;EASD,CAAA;EAED;;;EACO,SAASG,WAAT,CAAqBC,MAArB,EAA4BC,MAA5B,EAAmC;EACxC,EAAA,OAAOD,MAAM,CAAC3H,GAAP,KAAe4H,MAAM,CAAC5H,GAAtB,IAA6B2H,MAAM,CAACxK,GAAP,KAAeyK,MAAM,CAACzK,GAA1D,CAAA;EACD;;ECjED;;EACA,SAAS0K,eAAT,CAAyBb,KAAzB,EAA+B;EAC7B,EAAA,IAAIrF,CAAC,GAAGqF,KAAK,CAACD,IAAd,CAAA;;EACA,EAAA,IAAG,CAACpF,CAAC,GAAGA,CAAC,CAAClE,IAAP,MAAiBkE,CAAC,GAAGA,CAAC,CAACyF,IAAvB,CAAH,EAAgC;EAC9BzF,IAAAA,CAAC,CAACqF,KAAD,CAAD,CAD8B;EAE/B,GAAA;;IACD,IAAGA,KAAK,CAACM,iBAAT,EAA2B;EACzB,IAAA,OAAO,IAAP,CAAA;EACD,GAAA;EACF,CAAA;EAED;;;EACO,SAASQ,SAAT,CAAmBd,KAAnB,EAAyB;EAC9B,EAAA,IAAKhH,GAAL,GAA+BgH,KAA/B,CAAKhH,GAAL;EAAA,MAAS+G,IAAT,GAA+BC,KAA/B,CAASD,IAAT;EAAA,MAAc5G,QAAd,GAA+B6G,KAA/B,CAAc7G,QAAd;EAAA,MAAuBK,IAAvB,GAA+BwG,KAA/B,CAAuBxG,IAAvB,CAAA;;EACA,EAAA,IAAG,OAAOR,GAAP,KAAe,QAAlB,EAA2B;EACzB;EAEA;EACA,IAAA,IAAG6H,eAAe,CAACb,KAAD,CAAlB,EAA0B;EAAC;EACzB;EACA;EACA,MAAA,OAAOA,KAAK,CAACM,iBAAN,CAAwBS,GAA/B,CAAA;EACD,KARwB;;;MAWzBf,KAAK,CAACgB,EAAN,GAAW3B,QAAQ,CAAC4B,aAAT,CAAuBjI,GAAvB,CAAX,CAXyB;;MAazBkI,UAAU,CAAClB,KAAK,CAACgB,EAAP,EAAU,EAAV,EAAajB,IAAb,CAAV,CAbyB;;EAezB5G,IAAAA,QAAQ,CAAC3C,OAAT,CAAiB,UAAAP,KAAK,EAAI;QACxB+J,KAAK,CAACgB,EAAN,CAASG,WAAT,CAAqBL,SAAS,CAAC7K,KAAD,CAA9B,CAAA,CAAA;OADF,CAAA,CAAA;EAGD,GAlBD,MAkBK;EACH;MACA+J,KAAK,CAACgB,EAAN,GAAW3B,QAAQ,CAACC,cAAT,CAAwB9F,IAAxB,CAAX,CAAA;EACD,GAAA;;IACD,OAAOwG,KAAK,CAACgB,EAAb,CAAA;EACD,CAAA;EAED;;EACO,SAASE,UAAT,CAAoBF,EAApB,EAAgD;IAAA,IAAzBI,QAAyB,uEAAd,EAAc,CAAA;IAAA,IAAXC,KAAW,uEAAH,EAAG,CAAA;EACrD,EAAA,IAAIC,QAAQ,GAAGF,QAAQ,CAACG,KAAT,IAAkB,EAAjC,CAAA;IACA,IAAIC,QAAQ,GAAGH,KAAK,CAACE,KAAN,IAAe,EAA9B,CAFqD;;EAIrD,EAAA,KAAI,IAAIpL,GAAR,IAAemL,QAAf,EAAwB;EACtB,IAAA,IAAG,CAACE,QAAQ,CAACrL,GAAD,CAAZ,EAAkB;EAChB6K,MAAAA,EAAE,CAACO,KAAH,CAASpL,GAAT,IAAgB,EAAhB,CAAA;EACD,KAAA;EACF,GARoD;;;EAUrD,EAAA,KAAI,IAAIA,IAAR,IAAeiL,QAAf,EAAwB;EACtB,IAAA,IAAG,CAACC,KAAK,CAAClL,IAAD,CAAT,EAAe;QACb6K,EAAE,CAACS,eAAH,CAAmBtL,IAAnB,CAAA,CAAA;EACD,KAAA;EACF,GAdoD;;;EAgBrD,EAAA,KAAI,IAAIA,KAAR,IAAekL,KAAf,EAAqB;MACnB,IAAGlL,KAAG,KAAK,OAAX,EAAmB;EAAC;EAClB,MAAA,KAAI,IAAIuL,SAAR,IAAqBL,KAAK,CAACE,KAA3B,EAAiC;UAC/BP,EAAE,CAACO,KAAH,CAASG,SAAT,CAAA,GAAsBL,KAAK,CAACE,KAAN,CAAYG,SAAZ,CAAtB,CAAA;EACD,OAAA;EACF,KAJD,MAIK;QACHV,EAAE,CAACW,YAAH,CAAgBxL,KAAhB,EAAoBkL,KAAK,CAAClL,KAAD,CAAzB,CAAA,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;EAED;;EACO,SAASyL,KAAT,CAAeC,QAAf,EAAwB7B,KAAxB,EAA8B;IACnC,IAAG,CAAC6B,QAAJ,EAAa;EACX;EACA;MACA,OAAOf,SAAS,CAACd,KAAD,CAAhB,CAAA;EACD,GALkC;;;EAOnC,EAAA,IAAM8B,aAAa,GAAGD,QAAQ,CAACE,QAA/B,CAAA;;EACA,EAAA,IAAGD,aAAH,EAAiB;EACf;EACA,IAAA,IAAIE,GAAG,GAAGH,QAAV,CAFe;;EAGf,IAAA,IAAII,SAAS,GAAGD,GAAG,CAACE,UAApB,CAHe;;EAKf,IAAA,IAAIC,MAAM,GAAGrB,SAAS,CAACd,KAAD,CAAtB,CALe;;MAOfiC,SAAS,CAACG,YAAV,CAAuBD,MAAvB,EAA8BH,GAAG,CAACK,YAAlC,CAAA,CAPe;;EAQfJ,IAAAA,SAAS,CAACK,WAAV,CAAsBN,GAAtB,EARe;;EASf,IAAA,OAAOG,MAAP,CAAA;EACD,GAVD,MAUK;EACH;EACA;EAEAI,IAAAA,UAAU,CAACV,QAAD,EAAU7B,KAAV,CAAV,CAAA;EACD,GAAA;EACF;EAGD;EACA;;EACA;;EACA,SAASuC,UAAT,CAAoBV,QAApB,EAA6B7B,KAA7B,EAAmC;EACjC,EAAA,IAAG,CAACU,WAAW,CAACmB,QAAD,EAAU7B,KAAV,CAAf,EAAgC;EAC9B;EACA,IAAA,IAAIgB,GAAE,GAAGF,SAAS,CAACd,KAAD,CAAlB,CAAA;;EACA,IAAA,OAAO6B,QAAQ,CAACb,EAAT,CAAYkB,UAAZ,CAAuBM,YAAvB,CAAoCxB,GAApC,EAAuCa,QAAQ,CAACb,EAAhD,CAAP,CAAA;EACD,GAAA;;IACD,IAAIA,EAAE,GAAGhB,KAAK,CAACgB,EAAN,GAAWa,QAAQ,CAACb,EAA7B,CANiC;EAOjC;;EACA,EAAA,IAAG,CAACa,QAAQ,CAAC7I,GAAb,EAAiB;EAAC;EAChB,IAAA,IAAG6I,QAAQ,CAACrI,IAAT,KAAkBwG,KAAK,CAACxG,IAA3B,EAAgC;EAC9B;EACAwH,MAAAA,EAAE,CAACvB,WAAH,GAAiBO,KAAK,CAACxG,IAAvB,CAAA;EACD,KAAA;EACF,GAbgC;;;EAgBjC0H,EAAAA,UAAU,CAACF,EAAD,EAAIa,QAAQ,CAAC9B,IAAb,EAAkBC,KAAK,CAACD,IAAxB,CAAV,CAhBiC;;EAmBjC,EAAA,IAAI0C,WAAW,GAAGZ,QAAQ,CAAC1I,QAAT,IAAqB,EAAvC,CAAA;EACA,EAAA,IAAIuJ,WAAW,GAAG1C,KAAK,CAAC7G,QAAN,IAAkB,EAApC,CAAA;;IACA,IAAGsJ,WAAW,CAAC7I,MAAZ,GAAqB,CAArB,IAA0B8I,WAAW,CAAC9I,MAAZ,GAAqB,CAAlD,EAAoD;EAClD;EACA+I,IAAAA,cAAc,CAAC3B,EAAD,EAAIyB,WAAJ,EAAgBC,WAAhB,CAAd,CAAA;EACD,GAHD,MAGM,IAAGA,WAAW,CAAC9I,MAAZ,GAAqB,CAAxB,EAA0B;EAC9B;EACA;EACAgJ,IAAAA,aAAa,CAAC5B,EAAD,EAAI0B,WAAJ,CAAb,CAAA;EACD,GAJK,MAIA,IAAGD,WAAW,CAAC7I,MAAZ,GAAqB,CAAxB,EAA0B;EAC9B;MACAoH,EAAE,CAAC6B,SAAH,GAAe,EAAf,CAAA;EACD,GAAA;;EACD,EAAA,OAAO7B,EAAP,CAAA;EACD,CAAA;EAED;;;EACA,SAAS4B,aAAT,CAAuB5B,EAAvB,EAA0B7H,QAA1B,EAAmC;EACjC,EAAA,KAAI,IAAIwB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGxB,QAAQ,CAACS,MAA5B,EAAmCe,CAAC,EAApC,EAAuC;EACrC,IAAA,IAAI1E,KAAK,GAAGkD,QAAQ,CAACwB,CAAD,CAApB,CAAA;EACAqG,IAAAA,EAAE,CAACG,WAAH,CAAeL,SAAS,CAAC7K,KAAD,CAAxB,CAAA,CAAA;EACD,GAAA;EACF,CAAA;EAED;;;EACA,SAAS0M,cAAT,CAAwB3B,EAAxB,EAA2ByB,WAA3B,EAAuCC,WAAvC,EAAmD;EACjD;;EACA;EACF;EACA;EACA;EACA;EACA;EACA;EACA;;EACE;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACE;EACF;EACA;EACA;EACA;EACA;EACA;EACA;;EACE;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACE;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACE,EAAA,IAAII,aAAa,GAAG,CAApB,CApDiD;;EAqDjD,EAAA,IAAIC,aAAa,GAAG,CAApB,CArDiD;;IAsDjD,IAAIC,WAAW,GAAGP,WAAW,CAAC7I,MAAZ,GAAqB,CAAvC,CAtDiD;;IAuDjD,IAAIqJ,WAAW,GAAGP,WAAW,CAAC9I,MAAZ,GAAqB,CAAvC,CAvDiD;;EAyDjD,EAAA,IAAIsJ,aAAa,GAAGT,WAAW,CAAC,CAAD,CAA/B,CAAA;EACA,EAAA,IAAIU,aAAa,GAAGT,WAAW,CAAC,CAAD,CAA/B,CAAA;EACA,EAAA,IAAIU,WAAW,GAAGX,WAAW,CAACO,WAAD,CAA7B,CAAA;EACA,EAAA,IAAIK,WAAW,GAAGX,WAAW,CAACO,WAAD,CAA7B,CAAA;EAEA;;IACA,SAASK,cAAT,CAAwBnK,QAAxB,EAAiC;MAC/B,IAAI0C,GAAG,GAAG,EAAV,CAAA;EACA1C,IAAAA,QAAQ,CAAC3C,OAAT,CAAiB,UAACP,KAAD,EAAOwF,KAAP,EAAe;EAC9BI,MAAAA,GAAG,CAAC5F,KAAK,CAACE,GAAP,CAAH,GAAiBsF,KAAjB,CAAA;OADF,CAAA,CAAA;EAGA,IAAA,OAAOI,GAAP,CAAA;EACD,GAAA;;EACD,EAAA,IAAIA,GAAG,GAAGyH,cAAc,CAACb,WAAD,CAAxB,CAtEiD;;EAyEjD,EAAA,OAAMK,aAAa,IAAIE,WAAjB,IAAgCD,aAAa,IAAIE,WAAvD,EAAmE;EACjE;EACA;EACA;MAEA,IAAG,CAACC,aAAJ,EAAkB;EAAC;EACjBA,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEK,aAAH,CAA3B,CAAA;EACD,KAFD,MAEM,IAAG,CAACM,WAAJ,EAAgB;EAAC;EACrBA,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAEO,WAAH,CAAzB,CAAA;OADI,MAEA,IAAGtC,WAAW,CAACwC,aAAD,EAAeC,aAAf,CAAd,EAA4C;EAAC;EACjD;EACAZ,MAAAA,UAAU,CAACW,aAAD,EAAeC,aAAf,CAAV,CAAA;EACAD,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEK,aAAH,CAA3B,CAAA;EACAK,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEK,aAAH,CAA3B,CAAA;OAJI,MAKA,IAAGrC,WAAW,CAAC0C,WAAD,EAAaC,WAAb,CAAd,EAAwC;EAAC;EAC7Cd,MAAAA,UAAU,CAACa,WAAD,EAAaC,WAAb,CAAV,CAAA;EACAD,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAEO,WAAH,CAAzB,CAAA;EACAK,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAEO,WAAH,CAAzB,CAAA;OAHI,MAIA,IAAGvC,WAAW,CAAC0C,WAAD,EAAaD,aAAb,CAAd,EAA0C;EAAC;EAC/CZ,MAAAA,UAAU,CAACa,WAAD,EAAaD,aAAb,CAAV,CAD8C;;QAG9CnC,EAAE,CAACoB,YAAH,CAAgBgB,WAAW,CAACpC,EAA5B,EAA+BkC,aAAa,CAAClC,EAA7C,CAAA,CAAA;EACAoC,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAEO,WAAH,CAAzB,CAAA;EACAG,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEK,aAAH,CAA3B,CAAA;OALI,MAMA,IAAGrC,WAAW,CAACwC,aAAD,EAAeG,WAAf,CAAd,EAA0C;EAAC;EAC/Cd,MAAAA,UAAU,CAACW,aAAD,EAAeG,WAAf,CAAV,CAD8C;;QAG9CrC,EAAE,CAACoB,YAAH,CAAgBc,aAAa,CAAClC,EAA9B,EAAiCoC,WAAW,CAACpC,EAAZ,CAAeqB,YAAhD,CAAA,CAAA;EACAa,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEK,aAAH,CAA3B,CAAA;EACAO,MAAAA,WAAW,GAAGX,WAAW,CAAC,EAAEO,WAAH,CAAzB,CAAA;EACD,KANK,MAMD;EACH;EACA;EACA,MAAA,IAAIM,SAAS,GAAG1H,GAAG,CAACsH,aAAa,CAAChN,GAAf,CAAnB,CAAA;;QACA,IAAGoN,SAAS,KAAK/F,SAAjB,EAA2B;EACzB,QAAA,IAAIgG,SAAS,GAAGf,WAAW,CAACc,SAAD,CAA3B,CADyB;;UAEzBvC,EAAE,CAACoB,YAAH,CAAgBoB,SAAS,CAACxC,EAA1B,EAA6BkC,aAAa,CAAClC,EAA3C,CAAA,CAFyB;;EAGzByB,QAAAA,WAAW,CAACc,SAAD,CAAX,GAAyB/F,SAAzB,CAHyB;;EAIzB+E,QAAAA,UAAU,CAACiB,SAAD,EAAWL,aAAX,CAAV,CAJyB;EAK1B,OALD,MAKK;EACH;UACAnC,EAAE,CAACoB,YAAH,CAAgBtB,SAAS,CAACqC,aAAD,CAAzB,EAAyCD,aAAa,CAAClC,EAAvD,CAAA,CAAA;EACD,OAZE;;;EAcHmC,MAAAA,aAAa,GAAGT,WAAW,CAAC,EAAEK,aAAH,CAA3B,CAAA;EACD,KAAA;EACF,GAvHgD;EAyHjD;;;IACA,IAAGA,aAAa,IAAIE,WAApB,EAAgC;MAC9B,KAAI,IAAItI,CAAC,GAAGoI,aAAZ,EAA0BpI,CAAC,IAAIsI,WAA/B,EAA2CtI,CAAC,EAA5C,EAA+C;QAC7C,IAAI8I,OAAO,GAAG3C,SAAS,CAAC4B,WAAW,CAAC/H,CAAD,CAAZ,CAAvB,CAD6C;EAG7C;EACA;;EACA,MAAA,IAAI+I,MAAM,GAAGhB,WAAW,CAACO,WAAW,GAAG,CAAf,CAAX,GAA+BP,WAAW,CAACO,WAAW,GAAG,CAAf,CAAX,CAA6BjC,EAA5D,GAAiE,IAA9E,CAAA;EACAA,MAAAA,EAAE,CAACoB,YAAH,CAAgBqB,OAAhB,EAAwBC,MAAxB,EAN6C;EAO9C,KAAA;EACF,GAnIgD;;;IAqIjD,IAAGZ,aAAa,IAAIE,WAApB,EAAgC;MAC9B,KAAI,IAAIrI,EAAC,GAAGmI,aAAZ,EAA0BnI,EAAC,IAAIqI,WAA/B,EAA2CrI,EAAC,EAA5C,EAA+C;EAC7C;EACA,MAAA,IAAG8H,WAAW,CAAC9H,EAAD,CAAd,EAAkB;EAChB,QAAA,IAAI8I,QAAO,GAAGhB,WAAW,CAAC9H,EAAD,CAAX,CAAeqG,EAA7B,CAAA;UACAA,EAAE,CAACsB,WAAH,CAAemB,QAAf,CAAA,CAAA;EACD,OAAA;EACF,KAAA;EACF,GAAA;EACF;;EC3RM,SAASE,aAAT,CAAuBrM,GAAvB,EAA2B;EAChC;EACAA,EAAAA,GAAG,CAACM,SAAJ,CAAcgM,OAAd,GAAwB,UAAS5D,KAAT,EAAe;MACrC,IAAMnD,EAAE,GAAG,IAAX,CAAA;EACA,IAAA,IAAMmE,EAAE,GAAGnE,EAAE,CAACkE,GAAd,CAAA;EAEA,IAAA,IAAI8C,QAAQ,GAAGhH,EAAE,CAACiH,MAAlB,CAJqC;;EAKrCjH,IAAAA,EAAE,CAACiH,MAAH,GAAY9D,KAAZ,CALqC;;EAMrC,IAAA,IAAG6D,QAAH,EAAY;EACV;QACAhH,EAAE,CAACkE,GAAH,GAASa,KAAK,CAACiC,QAAD,EAAU7D,KAAV,CAAd,CAAA;EACD,KAHD,MAGK;EACH;EACA;QACAnD,EAAE,CAACkE,GAAH,GAASa,KAAK,CAACZ,EAAD,EAAIhB,KAAJ,CAAd,CAAA;EACD,KAAA;KAbH,CAAA;EAeA;;;EACA1I,EAAAA,GAAG,CAACM,SAAJ,CAAcmM,EAAd,GAAmB,YAAU;EAC3B,IAAA,OAAOjE,kBAAkB,CAAlB,KAAA,CAAA,KAAA,CAAA,EAAA,CAAmB,IAAnB,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAA2BkE,SAA3B,CAAP,CAAA,CAAA,CAAA;KADF,CAAA;EAGA;;;EACA1M,EAAAA,GAAG,CAACM,SAAJ,CAAcqM,EAAd,GAAmB,YAAU;EAC3B,IAAA,OAAOxD,eAAe,CAAf,KAAA,CAAA,KAAA,CAAA,EAAA,CAAgB,IAAhB,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAwBuD,SAAxB,CAAP,CAAA,CAAA,CAAA;KADF,CAAA;EAGA;;;EACA1M,EAAAA,GAAG,CAACM,SAAJ,CAAcsM,EAAd,GAAmB,UAAS9J,KAAT,EAAe;EAChC,IAAA,IAAG,QAAOA,KAAP,CAAA,KAAiB,QAApB,EAA8B,OAAOA,KAAP,CAAA;EAC9B,IAAA,OAAOW,IAAI,CAACC,SAAL,CAAeZ,KAAf,CAAP,CAAA;KAFF,CAAA;EAIA;;;EACA9C,EAAAA,GAAG,CAACM,SAAJ,CAAcuM,OAAd,GAAwB,YAAU;EACjC,IAAA,IAAMtH,EAAE,GAAG,IAAX,CADiC;;MAGjC,OAAOA,EAAE,CAACqD,QAAH,CAAYhE,MAAZ,CAAmBwB,IAAnB,CAAwBb,EAAxB,CAAP,CAHiC;KAAlC,CAAA;EAKD,CAAA;EAED;;EACO,SAASuH,cAAT,CAAwBvH,EAAxB,EAA2BmE,EAA3B,EAA8B;EACnC;EACAnE,EAAAA,EAAE,CAACkE,GAAH,GAASC,EAAT,CAFmC;;EAInC,EAAA,IAAMqD,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EAC5BxH,IAAAA,EAAE,CAAC+G,OAAH,CAAW/G,EAAE,CAACsH,OAAH,EAAX,CAAA,CAAA;KADF,CAAA;;IAIA,IAAIvH,OAAJ,CAAYC,EAAZ,EAAewH,eAAf,EAA+B,IAA/B,EARmC;EAanC;EAED,CAAA;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;;EAEA;;EACO,SAASC,QAAT,CAAkBzH,EAAlB,EAAqBpG,IAArB,EAA0B;EAC/B,EAAA,IAAM8N,QAAQ,GAAG1H,EAAE,CAACqD,QAAH,CAAYzJ,IAAZ,CAAjB,CAAA;;EACA,EAAA,IAAG8N,QAAH,EAAY;EACVA,IAAAA,QAAQ,CAAC/N,OAAT,CAAiB,UAAAgO,OAAO,EAAA;EAAA,MAAA,OAAIA,OAAO,CAAC9G,IAAR,CAAab,EAAb,CAAJ,CAAA;OAAxB,CAAA,CAAA;EACD,GAAA;EACF;;EC/ED;EACA,IAAI4H,aAAa,GAAGC,KAAK,CAAC9M,SAA1B;;EAEO,IAAI+M,aAAa,GAAG1N,MAAM,CAACC,MAAP,CAAcuN,aAAd,CAApB;;EAGP,IAAIG,OAAO,GAAG,CACZ,MADY,EAEZ,KAFY,EAGZ,OAHY,EAIZ,SAJY,EAKZ,MALY,EAMZ,SANY,EAOZ,QAPY,CAAd;;EAWAA,OAAO,CAACpO,OAAR,CAAgB,UAAAsE,IAAI,EAAI;EACtB;EACA6J,EAAAA,aAAa,CAAC7J,IAAD,CAAb,GAAsB,YAAiB;EAAA,IAAA,IAAA,mBAAA,CAAA;;EAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAL+J,IAAK,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;QAALA,IAAK,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;EAAA,KAAA;;EACrC;EACA,IAAA,IAAMC,MAAM,GAAG,CAAAL,mBAAAA,GAAAA,aAAa,CAAC3J,IAAD,CAAb,EAAoB4C,IAApB,6BAAyB,IAAzB,CAAA,CAAA,MAAA,CAAiCmH,IAAjC,CAAA,CAAf,CAFqC;;;EAIrC,IAAA,IAAIE,QAAJ,CAAA;MACA,IAAIC,EAAE,GAAG,IAAA,CAAKC,MAAd,CAAA;;EACA,IAAA,QAAOnK,IAAP;EACE,MAAA,KAAK,MAAL,CAAA;EACA,MAAA,KAAK,SAAL;EACEiK,QAAAA,QAAQ,GAAGF,IAAX,CAAA;EACA,QAAA,MAAA;;EACF,MAAA,KAAK,QAAL;EAAc;EACZE,QAAAA,QAAQ,GAAGF,IAAI,CAAC5J,KAAL,CAAW,CAAX,CAAX,CAAA;EACA,QAAA,MAAA;EAPJ,KAAA;;EAWA,IAAA,IAAG8J,QAAH,EAAY;EACV;EACA;EACA;QACAC,EAAE,CAACE,YAAH,CAAgBH,QAAhB,CAAA,CAAA;EACD,KAtBoC;;;MAyBrCC,EAAE,CAACrH,GAAH,CAAOwH,MAAP,EAAA,CAAA;EAEA,IAAA,OAAOL,MAAP,CAAA;KA3BF,CAAA;EA6BD,CA/BD,CAAA;;ECdA;;EACO,SAASvF,OAAT,CAAiBQ,IAAjB,EAAsB;EAC3B;IACA,IAAG,OAAA,CAAOA,IAAP,CAAgB,KAAA,QAAhB,IAA4BA,IAAI,KAAK,IAAxC,EAA6C;EAC3C,IAAA,OAAA;EACD,GAJ0B;;;EAM3B,EAAA,IAAGA,IAAI,CAACkF,MAAL,YAAuBG,QAA1B,EAAmC;EACjC,IAAA,OAAA;EACD,GAR0B;EAW3B;;;EACA,EAAA,OAAO,IAAIA,QAAJ,CAAarF,IAAb,CAAP,CAAA;EACD,CAAA;EAED;;MACMqF;EACJ,EAAA,SAAA,QAAA,CAAYrF,IAAZ,EAAiB;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;;EAEf;EACA,IAAA,IAAA,CAAKpC,GAAL,GAAW,IAAIvB,GAAJ,EAAX,CAHe;EAOf;EACA;EACA;EACA;;EACAnF,IAAAA,MAAM,CAACoO,cAAP,CAAsBtF,IAAtB,EAA2B,QAA3B,EAAoC;EAClC3F,MAAAA,KAAK,EAAC,IAD4B;QAElCkL,UAAU,EAAC,KAFuB;;OAApC,CAAA,CAAA;;EAKA,IAAA,IAAGZ,KAAK,CAACa,OAAN,CAAcxF,IAAd,CAAH,EAAuB;EACrB;EACA;EACAA,MAAAA,IAAI,CAACyF,SAAL,GAAiBb,aAAjB,CAHqB;;QAKrB,IAAKO,CAAAA,YAAL,CAAkBnF,IAAlB,CAAA,CAAA;EACD,KAND,MAMK;QACH,IAAK0F,CAAAA,IAAL,CAAU1F,IAAV,CAAA,CAAA;EACD,KAAA;EACF,GAAA;;;;EACD,IAAA,KAAA,EAAA,SAAA,IAAA,CAAKA,IAAL,EAAU;EACR;EACA;QACA9I,MAAM,CAACyO,IAAP,CAAY3F,IAAZ,EAAkBvJ,OAAlB,CAA0B,UAAAL,GAAG,EAAI;UAC/BwP,cAAc,CAAC5F,IAAD,EAAM5J,GAAN,EAAU4J,IAAI,CAAC5J,GAAD,CAAd,CAAd,CAAA;SADF,CAAA,CAAA;EAGD,KAAA;;;EACD,IAAA,KAAA,EAAA,SAAA,YAAA,CAAa4J,IAAb,EAAkB;EAChBA,MAAAA,IAAI,CAACvJ,OAAL,CAAa,UAAAsE,IAAI,EAAA;UAAA,OAAIyE,OAAO,CAACzE,IAAD,CAAX,CAAA;SAAjB,CAAA,CAAA;EACD,KAAA;;;;;EAGH;;;EACO,SAAS6K,cAAT,CAAwBrJ,MAAxB,EAA+BnG,GAA/B,EAAmCiE,KAAnC,EAAyC;EAC9C;EACA,EAAA,IAAIwL,OAAO,GAAGrG,OAAO,CAACnF,KAAD,CAArB,CAF8C;EAG9C;;EACA,EAAA,IAAIuD,GAAG,GAAG,IAAIvB,GAAJ,EAAV,CAJ8C;;EAM9CnF,EAAAA,MAAM,CAACoO,cAAP,CAAsB/I,MAAtB,EAA6BnG,GAA7B,EAAiC;EAC/BsH,IAAAA,GAD+B,EAC1B,SAAA,GAAA,GAAA;EACH;QACA,IAAGrB,GAAG,CAACE,MAAP,EAAc;EAAC;UACbqB,GAAG,CAACI,MAAJ,EAAA,CADY;;EAEZ,QAAA,IAAG6H,OAAH,EAAW;EACT;EACAA,UAAAA,OAAO,CAACjI,GAAR,CAAYI,MAAZ,GAFS;EAIT;;EACA,UAAA,IAAG2G,KAAK,CAACa,OAAN,CAAcnL,KAAd,CAAH,EAAwB;cACtByL,WAAW,CAACzL,KAAD,CAAX,CAAA;EACD,WAAA;EACF,SAAA;EACF,OAAA;;EACD,MAAA,OAAOA,KAAP,CAAA;OAf6B;MAiB/B0L,GAjB+B,EAAA,SAAA,GAAA,CAiB3B5H,MAjB2B,EAiBpB;EACT;EACA,MAAA,IAAGA,MAAM,KAAK9D,KAAd,EAAqB,OAFZ;;QAITmF,OAAO,CAACrB,MAAD,CAAP,CAAA;EACA9D,MAAAA,KAAK,GAAG8D,MAAR,CAAA;QACAP,GAAG,CAACwH,MAAJ,EAAA,CANS;EAOV,KAAA;KAxBH,CAAA,CAAA;EA0BD,CAAA;EAED;;EACA,SAASU,WAAT,CAAqBzL,KAArB,EAA2B;EACzB,EAAA,KAAI,IAAIO,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAGP,KAAK,CAACR,MAAxB,EAA+Be,CAAC,EAAhC,EAAmC;EACjC,IAAA,IAAIoL,OAAO,GAAG3L,KAAK,CAACO,CAAD,CAAnB,CAAA;MACAoL,OAAO,CAACd,MAAR,IAAkBc,OAAO,CAACd,MAAR,CAAetH,GAAf,CAAmBI,MAAnB,EAAlB,CAAA;;EACA,IAAA,IAAG2G,KAAK,CAACa,OAAN,CAAcQ,OAAd,CAAH,EAA0B;QACxBF,WAAW,CAACE,OAAD,CAAX,CAAA;EACD,KAAA;EACF,GAAA;EACF;;ECnGD;;EACO,SAASC,SAAT,CAAmBnJ,EAAnB,EAAsB;EAC3B,EAAA,IAAMoJ,IAAI,GAAGpJ,EAAE,CAACqD,QAAhB,CAD2B;;IAE3B,IAAG+F,IAAI,CAAClG,IAAR,EAAa;EACX;MACAmG,QAAQ,CAACrJ,EAAD,CAAR,CAAA;EACD,GAAA;;IACD,IAAGoJ,IAAI,CAACE,QAAR,EAAiB;EACf;MACAC,YAAY,CAACvJ,EAAD,CAAZ,CAAA;EACD,GAAA;;IACD,IAAGoJ,IAAI,CAACI,KAAR,EAAc;EACZ;MACAC,SAAS,CAACzJ,EAAD,CAAT,CAAA;EACD,GAAA;EACF,CAAA;EAED;;EACA,SAASqJ,QAAT,CAAkBrJ,EAAlB,EAAqB;IACnB,IAAIkD,IAAI,GAAGlD,EAAE,CAACqD,QAAH,CAAYH,IAAvB,CADmB;;EAGnBA,EAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACrC,IAAL,CAAUb,EAAV,CAA7B,GAA6CkD,IAApD,CAHmB;;EAMnBR,EAAAA,OAAO,CAACQ,IAAD,CAAP,CANmB;;EASnBlD,EAAAA,EAAE,CAAC0J,KAAH,GAAWxG,IAAX,CATmB;EAWnB;;EACA,EAAA,KAAI,IAAI5J,GAAR,IAAe4J,IAAf,EAAoB;EAClByG,IAAAA,KAAK,CAAC3J,EAAD,EAAI,OAAJ,EAAY1G,GAAZ,CAAL,CAAA;EACD,GAAA;EACF,CAAA;EAED;;;EACA,SAASqQ,KAAT,CAAe3J,EAAf,EAAkBP,MAAlB,EAAyBnG,GAAzB,EAA6B;EAC3Bc,EAAAA,MAAM,CAACoO,cAAP,CAAsBxI,EAAtB,EAAyB1G,GAAzB,EAA6B;EAC3BsH,IAAAA,GAD2B,EACtB,SAAA,GAAA,GAAA;EACH,MAAA,OAAOZ,EAAE,CAACP,MAAD,CAAF,CAAWnG,GAAX,CAAP,CAAA;OAFyB;MAI3B2P,GAJ2B,EAAA,SAAA,GAAA,CAIvB5H,MAJuB,EAIhB;EACTrB,MAAAA,EAAE,CAACP,MAAD,CAAF,CAAWnG,GAAX,IAAkB+H,MAAlB,CAAA;EACD,KAAA;KANH,CAAA,CAAA;EAQD,CAAA;EAED;;;EACA,SAASkI,YAAT,CAAsBvJ,EAAtB,EAAyB;IACvB,IAAMsJ,QAAQ,GAAGtJ,EAAE,CAACqD,QAAH,CAAYiG,QAA7B,CADuB;;EAGvB,EAAA,IAAMM,QAAQ,GAAG5J,EAAE,CAAC6J,iBAAH,GAAuB,EAAxC,CAAA;;EACA,EAAA,KAAI,IAAIvQ,GAAR,IAAegQ,QAAf,EAAwB;EACtB,IAAA,IAAIQ,OAAO,GAAGR,QAAQ,CAAChQ,GAAD,CAAtB,CADsB;EAGtB;;EACA,IAAA,IAAIyQ,EAAE,GAAG,OAAOD,OAAP,IAAkB,UAAlB,GAA+BA,OAA/B,GAAyCA,OAAO,CAAClJ,GAA1D,CAJsB;EAMtB;;MACAgJ,QAAQ,CAACtQ,GAAD,CAAR,GAAgB,IAAIyG,OAAJ,CAAYC,EAAZ,EAAe+J,EAAf,EAAkB;EAACtJ,MAAAA,IAAI,EAAC,IAAA;EAAN,KAAlB,CAAhB,CAAA;EAEAuJ,IAAAA,cAAc,CAAChK,EAAD,EAAI1G,GAAJ,EAAQwQ,OAAR,CAAd,CAAA;EACD,GAAA;EACF,CAAA;EAED;;;EACA,SAASE,cAAT,CAAwBvK,MAAxB,EAA+BnG,GAA/B,EAAmCwQ,OAAnC,EAA2C;EACzC;IACe,OAAOA,OAAP,IAAkB,UAAlB,GAA+BA,OAA/B,GAAyCA,OAAO,CAAClJ,IAAhE;;IACA,IAAMqJ,MAAM,GAAGH,OAAO,CAACb,GAAR,IAAgB,YAAI,EAAnC,CAHyC;EAKzC;EACA;;;EACA7O,EAAAA,MAAM,CAACoO,cAAP,CAAsB/I,MAAtB,EAA6BnG,GAA7B,EAAiC;EAC/BsH,IAAAA,GAAG,EAACsJ,oBAAoB,CAAC5Q,GAAD,CADO;EAE/B2P,IAAAA,GAAG,EAACgB,MAAAA;KAFN,CAAA,CAAA;EAID;;EAGD;;;EACA,SAASC,oBAAT,CAA8B5Q,GAA9B,EAAkC;EAChC,EAAA,OAAO,YAAW;EAChB;EACA;EACA,IAAA,IAAMqG,OAAO,GAAG,IAAA,CAAKkK,iBAAL,CAAuBvQ,GAAvB,CAAhB,CAAA;;MACA,IAAGqG,OAAO,CAACe,KAAX,EAAiB;EACf;EACAf,MAAAA,OAAO,CAACwK,QAAR,EAAA,CAAA;EACD,KAAA;EACD;EACJ;EACA;EACA;EACA;EACI;EACA;EACA;EACA;EACA;EACA;EACA;;;MACA,IAAG5K,GAAG,CAACE,MAAP,EAAc;EACZE,MAAAA,OAAO,CAACuB,MAAR,EAAA,CAAA;EACD,KAAA;;MACD,OAAOvB,OAAO,CAACpC,KAAf,CAAA;KAvBF,CAAA;EAyBD,CAAA;EAED;;;EACA,SAASkM,SAAT,CAAmBzJ,EAAnB,EAAsB;EACpB,EAAA,IAAIwJ,KAAK,GAAGxJ,EAAE,CAACqD,QAAH,CAAYmG,KAAxB,CAAA;;EACA,EAAA,KAAI,IAAIlQ,GAAR,IAAekQ,KAAf,EAAqB;EACnB,IAAA,IAAM7B,OAAO,GAAG6B,KAAK,CAAClQ,GAAD,CAArB,CADmB;EAGnB;;EACA,IAAA,IAAGuO,KAAK,CAACa,OAAN,CAAcf,OAAd,CAAH,EAA0B;EACxB,MAAA,KAAI,IAAI7J,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAC6J,OAAO,CAAC5K,MAAxB,EAA+Be,CAAC,EAAhC,EAAmC;UACjCsM,aAAa,CAACpK,EAAD,EAAI1G,GAAJ,EAAQqO,OAAO,CAAC7J,CAAD,CAAf,CAAb,CAAA;EACD,OAAA;EACF,KAJD,MAIK;EACH;EACAsM,MAAAA,aAAa,CAACpK,EAAD,EAAI1G,GAAJ,EAAQqO,OAAR,CAAb,CAAA;EACD,KAAA;EACF,GAAA;EACF,CAAA;EAED;;;EACA,SAASyC,aAAT,CAAuBpK,EAAvB,EAA0B1G,GAA1B,EAA8BqO,OAA9B,EAAsC;EACpC;EACA,EAAA,IAAG,OAAOA,OAAP,KAAmB,QAAtB,EAA+B;MAC7BA,OAAO,GAAG3H,EAAE,CAACqD,QAAH,CAAY0E,OAAZ,CAAoBJ,OAApB,CAAV,CAAA;EACD,GAAA;;EACD,EAAA,OAAO3H,EAAE,CAACqK,MAAH,CAAU/Q,GAAV,EAAcqO,OAAd,CAAP,CAAA;EACD,CAAA;EAED;;;EACO,SAAS2C,cAAT,CAAwB7P,GAAxB,EAA4B;EACjCA,EAAAA,GAAG,CAACM,SAAJ,CAAcwP,SAAd,GAA0B3I,QAA1B,CADiC;;IAGjCnH,GAAG,CAACM,SAAJ,CAAcsP,MAAd,GAAuB,UAASpK,QAAT,EAAkBC,EAAlB,EAAqB;EAC1C;EACA;EACA;EACA,IAAA,IAAIH,OAAJ,CAAY,IAAZ,EAAiBE,QAAjB,EAA0B;EAACI,MAAAA,IAAI,EAAC,IAAA;EAAN,KAA1B,EAAsCH,EAAtC,CAAA,CAAA;KAJF,CAAA;EAMD;;ECjJD;EACA;EACA;EACA;;EACO,SAASsK,SAAT,CAAmB/P,GAAnB,EAAuB;EAC5BA,EAAAA,GAAG,CAACM,SAAJ,CAAcD,KAAd,GAAsB,UAASzB,OAAT,EAAiB;EACrC;EACA,IAAA,IAAM2G,EAAE,GAAG,IAAX,CAFqC;EAIrC;EACA;;EACAA,IAAAA,EAAE,CAACqD,QAAH,GAAcnK,YAAY,CAAC,IAAA,CAAK8B,WAAL,CAAiB3B,OAAlB,EAA0BA,OAA1B,CAA1B,CANqC;;EASrCoO,IAAAA,QAAQ,CAACzH,EAAD,EAAI,cAAJ,CAAR,CATqC;;EAWrCmJ,IAAAA,SAAS,CAACnJ,EAAD,CAAT,CAXqC;;EAarCyH,IAAAA,QAAQ,CAACzH,EAAD,EAAI,cAAJ,CAAR,CAbqC;;MAgBrC,IAAG3G,OAAO,CAAC8K,EAAX,EAAc;EACZnE,MAAAA,EAAE,CAAC2D,MAAH,CAAUtK,OAAO,CAAC8K,EAAlB,CAAA,CAAA;EACD,KAAA;KAlBH,CAAA;;EAoBA1J,EAAAA,GAAG,CAACM,SAAJ,CAAc4I,MAAd,GAAuB,UAASQ,EAAT,EAAY;MACjC,IAAMnE,EAAE,GAAG,IAAX,CAAA;EACAmE,IAAAA,EAAE,GAAG3B,QAAQ,CAACiI,aAAT,CAAuBtG,EAAvB,CAAL,CAAA;EACA,IAAA,IAAIiF,IAAI,GAAGpJ,EAAE,CAACqD,QAAd,CAHiC;;EAKjC,IAAA,IAAG,CAAC+F,IAAI,CAAC/J,MAAT,EAAgB;EAAC;EACf;EACA;EACA,MAAA,IAAID,QAAJ,CAAA;;EACA,MAAA,IAAG,CAACgK,IAAI,CAAChK,QAAN,IAAkB+E,EAArB,EAAwB;UACtB/E,QAAQ,GAAG+E,EAAE,CAACuG,SAAd,CAAA;EACD,OAFD,MAEK;UACHtL,QAAQ,GAAGgK,IAAI,CAAChK,QAAhB,CAAA;EACD,OAAA;;EACD,MAAA,IAAGA,QAAH,EAAY;EAAC;EACX;EACA,QAAA,IAAMC,MAAM,GAAGF,iBAAiB,CAACC,QAAD,CAAhC,CAAA;EACAgK,QAAAA,IAAI,CAAC/J,MAAL,GAAcA,MAAd,CAHU;EAIX,OAAA;EACF,KAnBgC;;;EAsBjCkI,IAAAA,cAAc,CAACvH,EAAD,EAAImE,EAAJ,CAAd,CAtBiC;EA0BjC;EACA;EACA;KA5BF,CAAA;EA8BD;;ECtDD,SAAS1J,GAAT,CAAapB,OAAb,EAAqB;EAAC;IACpB,IAAKyB,CAAAA,KAAL,CAAWzB,OAAX,CAAA,CAAA;EACD;;;EAGDmR,SAAS,CAAC/P,GAAD,CAAT;;EACAqM,aAAa,CAACrM,GAAD,CAAb;;EACAD,aAAa,CAACC,GAAD,CAAb;;EACA6P,cAAc,CAAC7P,GAAD,CAAd;;;;;;;;"}